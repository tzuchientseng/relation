(function(){"use strict";var a={4754:function(a,e,t){var o=t(5130),n=t(6768);const s={id:"app"};function l(a,e,t,o,l,r){const i=(0,n.g2)("LoginPage"),u=(0,n.g2)("MainPage");return(0,n.uX)(),(0,n.CE)("div",s,[a.isAuthenticated?((0,n.uX)(),(0,n.Wv)(u,{key:1})):((0,n.uX)(),(0,n.Wv)(i,{key:0}))])}var r=t(782),i=t.p+"img/logo.1a43b2bb.png",u=t(144);const c={class:"login-container"},d={class:"buttons"},v={class:"modal-content"},f={class:"form-group"},p={class:"form-group"};var m=(0,n.pM)({__name:"LoginCard",props:{showLogin:{type:Boolean}},setup(a){const e=(0,u.KR)(""),t=(0,u.KR)("");return(a,s)=>((0,n.uX)(),(0,n.CE)("div",c,[s[12]||(s[12]=(0,n.Lk)("h1",null,"Welcome to Relation!",-1)),s[13]||(s[13]=(0,n.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,n.Lk)("div",d,[s[6]||(s[6]=(0,n.Fv)('<button class="google" data-v-611bb4b1>Sign in with Google</button><button class="apple" data-v-611bb4b1>Sign in with Apple</button><div class="divider" data-v-611bb4b1>---- or ----</div><button class="create-account" data-v-611bb4b1>Create Account</button><p class="signin" data-v-611bb4b1>Already have an account?</p>',5)),(0,n.Lk)("button",{class:"login",onClick:s[0]||(s[0]=e=>a.$emit("toggleModal"))},"Login")]),a.showLogin?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal-overlay",onClick:s[5]||(s[5]=(0,o.D$)((e=>a.$emit("toggleModal")),["self"]))},[(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"close-btn",onClick:s[1]||(s[1]=e=>a.$emit("toggleModal"))},"×"),s[10]||(s[10]=(0,n.Lk)("h3",null,"Log In",-1)),(0,n.Lk)("form",{onSubmit:s[4]||(s[4]=(0,o.D$)((o=>a.$emit("login",{username:e.value,password:t.value})),["prevent"]))},[(0,n.Lk)("div",f,[s[7]||(s[7]=(0,n.Lk)("label",{for:"account"},"Account",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":s[2]||(s[2]=a=>e.value=a),placeholder:"Enter your account",required:"",autocomplete:"username"},null,512),[[o.Jo,e.value]])]),(0,n.Lk)("div",p,[s[8]||(s[8]=(0,n.Lk)("label",{for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=a=>t.value=a),placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,512),[[o.Jo,t.value]])]),s[9]||(s[9]=(0,n.Lk)("button",{type:"submit",class:"submit-btn"},"Confirm",-1))],32),s[11]||(s[11]=(0,n.Lk)("p",null,[(0,n.eW)("Don't have an account? "),(0,n.Lk)("a",{href:"#"},"Sign Up")],-1))])])):(0,n.Q3)("",!0)]))}}),g=t(1241);const b=(0,g.A)(m,[["__scopeId","data-v-611bb4b1"]]);var h=b;const k={class:"container"},L={class:"right-side"};var y=(0,n.pM)({__name:"LoginPage",setup(a){const e=(0,r.Pj)(),t=(0,u.KR)(!1),o=()=>{t.value=!t.value},s=async a=>{try{await e.dispatch("auth/login",a);o()}catch(t){console.error(t),alert("Login failed. Please try again.")}};return(a,e)=>((0,n.uX)(),(0,n.CE)("div",k,[e[0]||(e[0]=(0,n.Lk)("div",{class:"left-side"},[(0,n.Lk)("img",{src:i,alt:"logo",id:"logo"})],-1)),(0,n.Lk)("div",L,[(0,n.bF)(h,{showLogin:t.value,onToggleModal:o,onLogin:s},null,8,["showLogin"])])]))}});const w=(0,g.A)(y,[["__scopeId","data-v-3bd1a8c0"]]);var M=w;const C={id:"app"},_={class:"container"},E={id:"news"};function A(a,e,t,o,s,l){const r=(0,n.g2)("NavBar"),i=(0,n.g2)("NewsBar");return(0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",_,[(0,n.bF)(r),e[0]||(e[0]=(0,n.Lk)("div",{id:"posts"},"Posts",-1)),(0,n.Lk)("div",E,[(0,n.bF)(i)])])])}const T={class:"sidebar"},P={class:"game-modal"};function $(a,e,t,s,l,r){const u=(0,n.g2)("AccountMenu"),c=(0,n.g2)("TileMatchingGame");return(0,n.uX)(),(0,n.CE)("div",T,[e[4]||(e[4]=(0,n.Fv)('<img id="nav-item" src="'+i+'" alt="icon" data-v-5bf7d778><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-home" data-v-5bf7d778></i><span data-v-5bf7d778>Home</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-search" data-v-5bf7d778></i><span data-v-5bf7d778>Explore</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-bell" data-v-5bf7d778></i><span data-v-5bf7d778>Notifications</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-envelope" data-v-5bf7d778></i><span data-v-5bf7d778>Messages</span></a>',5)),(0,n.Lk)("a",{class:"menu-item",href:"#",onClick:e[0]||(e[0]=e=>a.showGameModal=!0)},e[3]||(e[3]=[(0,n.Lk)("i",{class:"fas fa-gamepad"},null,-1),(0,n.Lk)("span",null,"Game",-1)])),e[5]||(e[5]=(0,n.Fv)('<a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-bookmark" data-v-5bf7d778></i><span data-v-5bf7d778>Bookmarks</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-users" data-v-5bf7d778></i><span data-v-5bf7d778>Communities</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-star" data-v-5bf7d778></i><span data-v-5bf7d778>Premium</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-user" data-v-5bf7d778></i><span data-v-5bf7d778>Profile</span></a><a class="menu-item" href="#" data-v-5bf7d778><i class="fas fa-ellipsis-h" data-v-5bf7d778></i><span data-v-5bf7d778>More</span></a><a class="post-button" href="#" data-v-5bf7d778>Post</a>',6)),(0,n.bF)(u),a.showGameModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"game-modal-overlay",onClick:e[2]||(e[2]=(0,o.D$)(((...e)=>a.closeModal&&a.closeModal(...e)),["self"]))},[(0,n.Lk)("div",P,[(0,n.Lk)("button",{class:"close-btn",onClick:e[1]||(e[1]=(...e)=>a.closeModal&&a.closeModal(...e))},"×"),(0,n.bF)(c)])])):(0,n.Q3)("",!0)])}var S=t(4232),K=t.p+"img/male.79b1906c.png";const R={class:"profile-container"},X=["src"],D={class:"profile-info"},j={key:0,class:"menu-dropdown"};var F=(0,n.pM)({__name:"AccountMenu",setup(a){const e=K,t=(0,u.KR)(e),s=(0,u.KR)("Sunny Tseng"),l=(0,u.KR)("__SunnyTseng__"),i=(0,u.KR)(!1),c=(0,r.Pj)(),d=()=>{c.dispatch("auth/logout")},v=async()=>{try{const a=await fetch("https://api.example.com/user/profilePict");if(a.ok){const e=await a.json();e&&e.image&&(t.value=e.image)}else console.error("Failed to fetch profile image:",a.status)}catch(a){console.error("Error fetching profile image:",a)}};(0,n.sV)((()=>{v()}));const f=()=>{i.value=!i.value},p=a=>{console.log("更多選項按鈕被點擊")};return(a,e)=>((0,n.uX)(),(0,n.CE)("div",R,[(0,n.Lk)("div",{class:"profile-component",onClick:f},[(0,n.Lk)("img",{src:t.value,alt:"Profile Picture",class:"profile-image"},null,8,X),(0,n.Lk)("div",D,[(0,n.Lk)("h3",null,(0,S.v_)(s.value),1),(0,n.Lk)("p",null,(0,S.v_)(l.value),1)]),(0,n.Lk)("button",{onClick:(0,o.D$)(p,["stop"]),class:"more-options"},"...")]),(0,n.bF)(o.eB,{name:"menu-slide"},{default:(0,n.k6)((()=>[i.value?((0,n.uX)(),(0,n.CE)("div",j,[e[0]||(e[0]=(0,n.Lk)("p",null,"Setting",-1)),(0,n.Lk)("button",{class:"logout-btn",onClick:d},"Logout "+(0,S.v_)(l.value),1)])):(0,n.Q3)("",!0)])),_:1})]))}});const O=(0,g.A)(F,[["__scopeId","data-v-2edbf7c2"]]);var I=O;const x={class:"game-container"},B={class:"game-board"},N=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function G(a,e,t,s,l,r){return(0,n.uX)(),(0,n.CE)("div",x,[e[2]||(e[2]=(0,n.Lk)("h1",null,"轉珠遊戲",-1)),(0,n.Lk)("div",B,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.board,((a,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a,((a,l)=>((0,n.uX)(),(0,n.CE)("div",{key:l,class:(0,S.C4)(["cell",`type-${a}`,{exploding:s.isExploding(t,l)}]),style:(0,S.Tr)(s.getCellStyle(t,l)),onMousedown:a=>s.startDrag(t,l,a),onMousemove:a=>s.drag(t,l,a),onMouseup:e[0]||(e[0]=(...a)=>s.endDrag&&s.endDrag(...a)),onTouchstart:a=>s.startDrag(t,l,a),onTouchmove:(0,o.D$)((a=>s.drag(t,l,a)),["prevent"]),onTouchend:e[1]||(e[1]=(...a)=>s.endDrag&&s.endDrag(...a))},null,46,N)))),128))])))),128))])])}t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(8992),t(3949),t(1454),t(7550);var W={setup(){const a=5,e=6,t=(0,u.KR)(n()),o=(0,u.KR)([]);function n(){return Array.from({length:a},(()=>Array.from({length:e},(()=>Math.floor(3*Math.random())))))}const s=(0,u.KR)(!1),l=(0,u.KR)(null),r=(0,u.KR)(null),i=(0,u.KR)([]),c=(a,e,t)=>{s.value=!0,l.value=a,r.value=e,i.value=[[a,e]]},d=(a,e,o)=>{if(!s.value)return;const n=i.value[i.value.length-1];(1===Math.abs(a-n[0])&&e===n[1]||1===Math.abs(e-n[1])&&a===n[0])&&([t.value[a][e],t.value[n[0]][n[1]]]=[t.value[n[0]][n[1]],t.value[a][e]],i.value.push([a,e]))},v=()=>{s.value=!1,p()?setTimeout((()=>{m(),setTimeout(g,300)}),300):f()},f=()=>{for(let a=i.value.length-1;a>0;a--){const[e,o]=i.value[a],[n,s]=i.value[a-1];[t.value[e][o],t.value[n][s]]=[t.value[n][s],t.value[e][o]]}},p=()=>{const n=new Set;for(let o=0;o<a;o++){let a=1;for(let s=1;s<e;s++)if(t.value[o][s]===t.value[o][s-1])a++;else{if(a>=3)for(let e=0;e<a;e++)n.add(`${o},${s-1-e}`);a=1}if(a>=3)for(let t=0;t<a;t++)n.add(`${o},${e-1-t}`)}for(let o=0;o<e;o++){let e=1;for(let s=1;s<a;s++)if(t.value[s][o]===t.value[s-1][o])e++;else{if(e>=3)for(let a=0;a<e;a++)n.add(`${s-1-a},${o}`);e=1}if(e>=3)for(let t=0;t<e;t++)n.add(`${a-1-t},${o}`)}return o.value=Array.from(n).map((a=>{const[e,t]=a.split(",").map(Number);return{row:e,col:t}})),o.value.length>0},m=()=>{o.value.forEach((({row:a,col:e})=>{t.value[a][e]=null})),o.value=[]},g=()=>{for(let o=0;o<e;o++){let e=0;for(let n=a-1;n>=0;n--)null===t.value[n][o]?e++:e>0&&(t.value[n+e][o]=t.value[n][o],t.value[n][o]=null);for(let a=0;a<e;a++)t.value[a][o]=Math.floor(3*Math.random())}p()&&setTimeout((()=>{m(),setTimeout(g,300)}),300)},b=(a,e)=>o.value.some((t=>t.row===a&&t.col===e)),h=(a,e)=>null===t.value[a][e]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:t,startDrag:c,drag:d,endDrag:v,isExploding:b,getCellStyle:h}}};const J=(0,g.A)(W,[["render",G],["__scopeId","data-v-315819a8"]]);var Q=J,U=(0,n.pM)({name:"NavBar",components:{AccountMenu:I,TileMatchingGame:Q},setup(){const a=(0,u.KR)(!1),e=()=>{a.value=!1};return{showGameModal:a,closeModal:e}}});const V=(0,g.A)(U,[["render",$],["__scopeId","data-v-5bf7d778"]]);var q=V;function Y(a,e){return" -- NEWS BAR -- "}const H={},z=(0,g.A)(H,[["render",Y]]);var Z=z,aa=(0,n.pM)({name:"MainPage",components:{NavBar:q,NewsBar:Z}});const ea=(0,g.A)(aa,[["render",A],["__scopeId","data-v-9ed6584c"]]);var ta=ea,oa=(0,n.pM)({name:"App",components:{LoginPage:M,MainPage:ta},setup(){const a=(0,r.Pj)(),e=(0,n.EW)((()=>a.getters["auth/isAuthenticated"]));return{isAuthenticated:e}}});const na=(0,g.A)(oa,[["render",l]]);var sa=na;const la={token:localStorage.getItem("token")||null},ra={isAuthenticated(a){return!!a.token}},ia={setToken(a,e){a.token=e,localStorage.setItem("token",e)},clearToken(a){a.token=null,localStorage.removeItem("token")}},ua={async login({commit:a},e){try{const t=await fetch("https://home.sunnytseng.com/api/relation/token/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Login failed");const o=await t.json();return a("setToken",o.access),o}catch(t){throw console.error(t),t}},logout({commit:a}){a("clearToken")}};var ca={namespaced:!0,state:la,getters:ra,mutations:ia,actions:ua},da=(0,r.y$)({modules:{auth:ca}});(0,o.Ef)(sa).use(da).mount("#app")}},e={};function t(o){var n=e[o];if(void 0!==n)return n.exports;var s=e[o]={exports:{}};return a[o].call(s.exports,s,s.exports,t),s.exports}t.m=a,function(){var a=[];t.O=function(e,o,n,s){if(!o){var l=1/0;for(c=0;c<a.length;c++){o=a[c][0],n=a[c][1],s=a[c][2];for(var r=!0,i=0;i<o.length;i++)(!1&s||l>=s)&&Object.keys(t.O).every((function(a){return t.O[a](o[i])}))?o.splice(i--,1):(r=!1,s<l&&(l=s));if(r){a.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}s=s||0;for(var c=a.length;c>0&&a[c-1][2]>s;c--)a[c]=a[c-1];a[c]=[o,n,s]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var o in e)t.o(e,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:e[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){t.p="/"}(),function(){var a={524:0};t.O.j=function(e){return 0===a[e]};var e=function(e,o){var n,s,l=o[0],r=o[1],i=o[2],u=0;if(l.some((function(e){return 0!==a[e]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(i)var c=i(t)}for(e&&e(o);u<l.length;u++)s=l[u],t.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return t.O(c)},o=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(4754)}));o=t.O(o)})();
//# sourceMappingURL=app.73f1d194.js.map