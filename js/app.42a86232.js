(function(){"use strict";var e={5989:function(e,t,a){var o=a(5130),s=a(6768);const n={id:"app"};function l(e,t,a,o,l,r){const i=(0,s.g2)("LoginPage"),u=(0,s.g2)("MainPage");return(0,s.uX)(),(0,s.CE)("div",n,[e.isAuthenticated?((0,s.uX)(),(0,s.Wv)(u,{key:1})):((0,s.uX)(),(0,s.Wv)(i,{key:0}))])}var r=a(782),i=a.p+"img/logo.1a43b2bb.png",u=a(144),c=a(4232);const v={class:"login-container"},d={class:"buttons"},p={class:"modal-content"},m={key:0,class:"error-message"},g={class:"form-group"},f={class:"form-group"},h=["disabled"],k={key:0,class:"spinner"},L={key:1};var y=(0,s.pM)({__name:"LoginCard",props:{showLogin:Boolean,isLoading:Boolean,errorMessage:String},setup(e){const t=(0,u.KR)(""),a=(0,u.KR)("");return(n,l)=>((0,s.uX)(),(0,s.CE)("div",v,[l[14]||(l[14]=(0,s.Lk)("h1",null,"Welcome to Relation!",-1)),l[15]||(l[15]=(0,s.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,s.Lk)("div",d,[l[6]||(l[6]=(0,s.Lk)("button",{class:"google"},"Sign in with Google",-1)),l[7]||(l[7]=(0,s.Lk)("button",{class:"apple"},"Sign in with Apple",-1)),(0,s.Lk)("button",{class:"login",onClick:l[0]||(l[0]=e=>n.$emit("toggleModal"))},"Login"),l[8]||(l[8]=(0,s.Lk)("div",{class:"divider"},"---- or ----",-1)),l[9]||(l[9]=(0,s.Lk)("p",{class:"signin"},"No account yet?",-1)),l[10]||(l[10]=(0,s.Lk)("button",{class:"create-account"},"Create Account",-1))]),e.showLogin?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:l[5]||(l[5]=(0,o.D$)((e=>n.$emit("toggleModal")),["self"]))},[(0,s.Lk)("div",p,[(0,s.Lk)("button",{class:"close-btn",onClick:l[1]||(l[1]=e=>n.$emit("toggleModal"))},"×"),l[13]||(l[13]=(0,s.Lk)("h3",null,"Log In",-1)),e.errorMessage?((0,s.uX)(),(0,s.CE)("p",m,(0,c.v_)(e.errorMessage),1)):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:l[4]||(l[4]=(0,o.D$)((e=>n.$emit("login",{username:t.value,password:a.value})),["prevent"]))},[(0,s.Lk)("div",g,[l[11]||(l[11]=(0,s.Lk)("label",{for:"account"},"Account",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":l[2]||(l[2]=e=>t.value=e),placeholder:"guest",required:"",autocomplete:"username"},null,512),[[o.Jo,t.value]])]),(0,s.Lk)("div",f,[l[12]||(l[12]=(0,s.Lk)("label",{for:"password"},"Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":l[3]||(l[3]=e=>a.value=e),placeholder:"guest",required:"",autocomplete:"current-password"},null,512),[[o.Jo,a.value]])]),(0,s.Lk)("button",{type:"submit",class:"submit-btn",disabled:e.isLoading},[e.isLoading?((0,s.uX)(),(0,s.CE)("span",k)):((0,s.uX)(),(0,s.CE)("span",L,"Confirm"))],8,h)],32)])])):(0,s.Q3)("",!0)]))}}),E=a(1241);const w=(0,E.A)(y,[["__scopeId","data-v-7239d536"]]);var b=w;const C={key:0,class:"icon"},_={key:1,class:"container"},P={class:"right-side"};var M=(0,s.pM)({__name:"LoginPage",setup(e){const t=(0,r.Pj)(),a=(0,u.KR)(!1),n=(0,u.KR)(!0),l=(0,u.KR)(!1),c=(0,u.KR)(""),v=()=>{a.value=!a.value,c.value=""},d=async e=>{l.value=!0,c.value="";try{await t.dispatch("auth/login",e);v(),n.value=!1}catch(a){console.error(a),c.value=a?.response?.data?.message||"Login failed. Please try again."}finally{l.value=!1}};return(0,s.sV)((()=>{setTimeout((()=>{n.value=!1}),1e3)})),(e,t)=>n.value?((0,s.uX)(),(0,s.CE)("div",C,t[0]||(t[0]=[(0,s.Lk)("img",{src:i,alt:"Logo",class:"icon-img"},null,-1)]))):((0,s.uX)(),(0,s.CE)("div",_,[(0,s.bF)(o.eB,{name:"left-slide",appear:""},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.Lk)("div",{class:"left-side"},[(0,s.Lk)("img",{src:i,alt:"logo",id:"logo"})],-1)]))),_:1}),(0,s.bF)(o.eB,{name:"right-slide",appear:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",P,[(0,s.bF)(b,{showLogin:a.value,isLoading:l.value,errorMessage:c.value,onToggleModal:v,onLogin:d},null,8,["showLogin","isLoading","errorMessage"])])])),_:1})]))}});const S=(0,E.A)(M,[["__scopeId","data-v-b0ced078"]]);var T=S;const A={class:"post-modal"},R={class:"game-modal"};function X(e,t,a,n,l,r){const u=(0,s.g2)("AccountMenu"),v=(0,s.g2)("PostBox"),d=(0,s.g2)("TileMatchingGame");return(0,s.uX)(),(0,s.CE)("div",{class:(0,c.C4)(["sidebar",{hidden:!e.isVisible}])},[t[5]||(t[5]=(0,s.Fv)('<img id="nav-item" src="'+i+'" alt="icon" data-v-e079c696><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-home" data-v-e079c696></i><span data-v-e079c696>Home</span></a><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-search" data-v-e079c696></i><span data-v-e079c696>Explore</span></a><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-bell" data-v-e079c696></i><span data-v-e079c696>Notifications</span></a><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-envelope" data-v-e079c696></i><span data-v-e079c696>Messages</span></a><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-gamepad" data-v-e079c696></i><span data-v-e079c696>Game</span></a><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-user" data-v-e079c696></i><span data-v-e079c696>Profile</span></a><a class="menu-item" href="#" data-v-e079c696><i class="fas fa-ellipsis-h" data-v-e079c696></i><span data-v-e079c696>More</span></a>',8)),(0,s.Lk)("a",{class:"post-button",href:"#",onClick:t[0]||(t[0]=(0,o.D$)((t=>e.showPostBox=!0),["prevent"]))},"Post"),(0,s.bF)(u),e.showPostBox?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"post-modal-overlay",onClick:t[2]||(t[2]=(0,o.D$)(((...t)=>e.closePostBox&&e.closePostBox(...t)),["self"]))},[(0,s.Lk)("div",A,[(0,s.Lk)("button",{class:"post-close-btn",onClick:t[1]||(t[1]=(...t)=>e.closePostBox&&e.closePostBox(...t))},"×"),(0,s.bF)(v,{onCloseBox:e.closePostBox},null,8,["onCloseBox"])])])):(0,s.Q3)("",!0),e.showGameModal?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"game-modal-overlay",onClick:t[4]||(t[4]=(0,o.D$)(((...t)=>e.closeModal&&e.closeModal(...t)),["self"]))},[(0,s.Lk)("div",R,[(0,s.Lk)("button",{class:"close-btn",onClick:t[3]||(t[3]=(...t)=>e.closeModal&&e.closeModal(...t))},"×"),(0,s.bF)(d)])])):(0,s.Q3)("",!0)],2)}const I={class:"game-container"},K={class:"game-board"},$=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function x(e,t,a,n,l,r){return(0,s.uX)(),(0,s.CE)("div",I,[t[2]||(t[2]=(0,s.Lk)("h1",null,"轉珠遊戲",-1)),(0,s.Lk)("div",K,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.board,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"row"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,l)=>((0,s.uX)(),(0,s.CE)("div",{key:l,class:(0,c.C4)(["cell",`type-${e}`,{exploding:n.isExploding(a,l)}]),style:(0,c.Tr)(n.getCellStyle(a,l)),onMousedown:e=>n.startDrag(a,l,e),onMousemove:e=>n.drag(a,l,e),onMouseup:t[0]||(t[0]=(...e)=>n.endDrag&&n.endDrag(...e)),onTouchstart:e=>n.startDrag(a,l,e),onTouchmove:(0,o.D$)((e=>n.drag(a,l,e)),["prevent"]),onTouchend:t[1]||(t[1]=(...e)=>n.endDrag&&n.endDrag(...e))},null,46,$)))),128))])))),128))])])}a(4114),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(8992),a(3949),a(1454),a(7550);var W={setup(){const e=5,t=6,a=(0,u.KR)(s()),o=(0,u.KR)([]);function s(){return Array.from({length:e},(()=>Array.from({length:t},(()=>Math.floor(3*Math.random())))))}const n=(0,u.KR)(!1),l=(0,u.KR)(null),r=(0,u.KR)(null),i=(0,u.KR)([]),c=(e,t,a)=>{n.value=!0,l.value=e,r.value=t,i.value=[[e,t]]},v=(e,t,o)=>{if(!n.value)return;const s=i.value[i.value.length-1];(1===Math.abs(e-s[0])&&t===s[1]||1===Math.abs(t-s[1])&&e===s[0])&&([a.value[e][t],a.value[s[0]][s[1]]]=[a.value[s[0]][s[1]],a.value[e][t]],i.value.push([e,t]))},d=()=>{n.value=!1,m()?setTimeout((()=>{g(),setTimeout(f,300)}),300):p()},p=()=>{for(let e=i.value.length-1;e>0;e--){const[t,o]=i.value[e],[s,n]=i.value[e-1];[a.value[t][o],a.value[s][n]]=[a.value[s][n],a.value[t][o]]}},m=()=>{const s=new Set;for(let o=0;o<e;o++){let e=1;for(let n=1;n<t;n++)if(a.value[o][n]===a.value[o][n-1])e++;else{if(e>=3)for(let t=0;t<e;t++)s.add(`${o},${n-1-t}`);e=1}if(e>=3)for(let a=0;a<e;a++)s.add(`${o},${t-1-a}`)}for(let o=0;o<t;o++){let t=1;for(let n=1;n<e;n++)if(a.value[n][o]===a.value[n-1][o])t++;else{if(t>=3)for(let e=0;e<t;e++)s.add(`${n-1-e},${o}`);t=1}if(t>=3)for(let a=0;a<t;a++)s.add(`${e-1-a},${o}`)}return o.value=Array.from(s).map((e=>{const[t,a]=e.split(",").map(Number);return{row:t,col:a}})),o.value.length>0},g=()=>{o.value.forEach((({row:e,col:t})=>{a.value[e][t]=null})),o.value=[]},f=()=>{for(let o=0;o<t;o++){let t=0;for(let s=e-1;s>=0;s--)null===a.value[s][o]?t++:t>0&&(a.value[s+t][o]=a.value[s][o],a.value[s][o]=null);for(let e=0;e<t;e++)a.value[e][o]=Math.floor(3*Math.random())}m()&&setTimeout((()=>{g(),setTimeout(f,300)}),300)},h=(e,t)=>o.value.some((a=>a.row===e&&a.col===t)),k=(e,t)=>null===a.value[e][t]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:a,startDrag:c,drag:v,endDrag:d,isExploding:h,getCellStyle:k}}};const D=(0,E.A)(W,[["render",x],["__scopeId","data-v-315819a8"]]);var F=D,B=a.p+"img/male.79b1906c.png";const O={class:"account-profile"},N={key:0,class:"overlay-div"},j={class:"overlay-content"},Q=["src"];var G={__name:"AccountProfile",props:{profileImage:{type:String,default:""},name:{type:String,default:"Guest"},friendCount:{type:Number,default:0}},setup(e){const t=(0,u.KR)(!1),a=()=>{t.value=!t.value},n=e,l=(0,s.EW)((()=>n.profileImage||B)),r=(0,s.EW)((()=>n.name||"Guest")),i=(0,s.EW)((()=>n.friendCount||0));return(e,n)=>((0,s.uX)(),(0,s.CE)("div",O,[(0,s.Lk)("p",{class:"setting-style",onClick:(0,o.D$)(a,["stop"])},"Account Profile"),t.value?((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("div",j,[(0,s.Lk)("img",{src:l.value,alt:"Profile Picture",class:"overlay-profile-image"},null,8,Q),(0,s.Lk)("h4",null,(0,c.v_)(r.value),1),(0,s.Lk)("p",null,"Friends: "+(0,c.v_)(i.value),1)])])):(0,s.Q3)("",!0)]))}};const V=(0,E.A)(G,[["__scopeId","data-v-f56b5f06"]]);var U=V;const J={class:"profile-container"},z=["src"],Y={class:"profile-info"};var q=(0,s.pM)({__name:"AccountMenu",setup(e){const t=(0,r.Pj)(),a=(0,u.KR)(!1),o=(0,u.KR)(0),n=(0,s.EW)((()=>t.state.auth.account?.trim()||"_Account_")),l=(0,s.EW)((()=>t.state.auth.userName?.trim()||"Guest")),i=(0,s.EW)((()=>{const e=t.state.auth.avatar?.trim();return e||B})),v=()=>{a.value=!a.value},d=e=>{const t=document.querySelector(".profile-component");t&&!t.contains(e.target)&&(a.value=!1)};(0,s.sV)((()=>{document.addEventListener("click",d)}));const p=()=>{t.dispatch("auth/logout")};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",{class:"profile-component",onClick:v},[(0,s.Lk)("img",{src:i.value,alt:"Profile Picture",class:"profile-image"},null,8,z),(0,s.Lk)("div",Y,[(0,s.Lk)("h3",null,(0,c.v_)(l.value),1),(0,s.Lk)("p",null,"_"+(0,c.v_)(n.value)+"_",1)]),(0,s.Lk)("div",{class:(0,c.C4)(["menu-dropdown",{active:a.value}])},[(0,s.bF)(U,{name:l.value,profileImage:i.value,friendsCount:o.value},null,8,["name","profileImage","friendsCount"]),t[0]||(t[0]=(0,s.Lk)("p",null,"Setting",-1)),(0,s.Lk)("button",{class:"logout-btn",onClick:p},"Logout - "+(0,c.v_)(l.value),1)],2)])]))}});const H=(0,E.A)(q,[["__scopeId","data-v-b05d353c"]]);var Z=H;const ee={class:"post-box"},te={class:"user-info"},ae=["src"],oe={key:0,class:"image-upload-section"},se={class:"upload-header"},ne={key:0,class:"image-preview-container"},le=["src"],re=["onClick"],ie={class:"post-actions"},ue=["disabled"],ce={key:0,class:"spinner"},ve={key:1};var de={__name:"PostBox",emits:["closeBox"],setup(e,{emit:t}){const a=(0,r.Pj)(),n=t,l=(0,s.EW)((()=>{const e=a.state.auth.avatar?.trim();return e||B})),i=(0,u.KR)(""),c=(0,u.KR)(null),v=(0,u.KR)([]),d=(0,u.KR)([]),p=(0,u.KR)(!1),m=(0,u.KR)(!1),g=()=>{(0,s.dY)((()=>{c.value&&(c.value.style.height="auto",c.value.style.height=`${c.value.scrollHeight}px`)}))};(0,s.sV)((()=>{g()}));const f=()=>{p.value=!p.value},h=e=>{const t=Array.from(e.target.files);t.forEach((e=>{if(e.type.startsWith("image/")){const t=new FileReader;t.onload=t=>{v.value.push(t.target.result),d.value.push(e)},t.readAsDataURL(e)}})),e.target.value=""},k=e=>{v.value.splice(e,1),d.value.splice(e,1)},L=async()=>{if(i.value.trim()||0!==d.value.length){m.value=!0;try{await a.dispatch("postModule/createPost",{content:i.value,images:d.value}),i.value="",v.value=[],d.value=[],p.value=!1,g()}catch(e){console.error("Error posting:",e)}finally{m.value=!1,n("closeBox")}}};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("img",{src:l.value,alt:"User avatar",class:"avatar"},null,8,ae),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:"What is happening?!",class:"post-input",rows:"1",ref_key:"textareaRef",ref:c,onInput:g},null,544),[[o.Jo,i.value]])]),p.value?((0,s.uX)(),(0,s.CE)("div",oe,[(0,s.Lk)("div",se,[t[2]||(t[2]=(0,s.Lk)("label",{for:"file-upload",class:"file-label"},"📁 Choose File ",-1)),(0,s.Lk)("input",{type:"file",id:"file-upload",accept:"image/*",multiple:"",class:"file-input",onChange:h},null,32),(0,s.Lk)("button",{class:"close-upload-btn",onClick:t[1]||(t[1]=e=>p.value=!1)},"✖")]),v.value.length?((0,s.uX)(),(0,s.CE)("div",ne,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(v.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"image-preview"},[(0,s.Lk)("img",{src:e,alt:"uploaded image",class:"uploaded-image"},null,8,le),(0,s.Lk)("button",{class:"remove-image-btn",onClick:e=>k(t)},"✖",8,re)])))),128))])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",ie,[(0,s.Lk)("div",{class:"icons"},[(0,s.Lk)("button",{class:"icon-btn",onClick:f},t[3]||(t[3]=[(0,s.Lk)("i",{class:"fas fa-image"},null,-1)]))]),(0,s.Lk)("button",{class:"post-btn",disabled:!i.value.trim()&&0===v.value.length,onClick:L},[m.value?((0,s.uX)(),(0,s.CE)("span",ce)):((0,s.uX)(),(0,s.CE)("span",ve,"Post"))],8,ue)])]))}};const pe=(0,E.A)(de,[["__scopeId","data-v-73134ae4"]]);var me=pe,ge=(0,s.pM)({name:"NavBar",components:{AccountMenu:Z,TileMatchingGame:F,PostBox:me},setup(){const e=(0,u.KR)(!1),t=(0,u.KR)(!1),a=(0,u.KR)(window.innerWidth),o=()=>{e.value=!1},n=()=>{t.value=!1},l=(0,s.WQ)("isScrollingDown",(0,u.KR)(!1)),r=(0,s.EW)((()=>l.value)),i=(0,s.EW)((()=>a.value>768||!r.value)),c=()=>{a.value=window.innerWidth};return(0,s.sV)((()=>{window.addEventListener("resize",c)})),(0,s.hi)((()=>{window.removeEventListener("resize",c)})),{showPostBox:e,closePostBox:o,showGameModal:t,closeModal:n,isVisible:i}}});const fe=(0,E.A)(ge,[["render",X],["__scopeId","data-v-e079c696"]]);var he=fe;function ke(e,t){return" -- NEWS BAR -- "}const Le={},ye=(0,E.A)(Le,[["render",ke]]);var Ee=ye;const we={class:"post"},be={class:"post-header"},Ce=["src"],_e={class:"post-info"},Pe={class:"post-time"},Me={class:"post-content"},Se={key:0},Te=["src","alt"],Ae={key:1,class:"carousel"},Re={class:"post-actions"};var Xe=(0,s.pM)({__name:"PostItem",props:{post:{}},setup(e){const t=e,a=(0,r.Pj)(),o=(0,u.KR)(0),n=(0,u.KR)(t.post.media&&t.post.media.length>0?t.post.media[0]:null);function l(e){const t=new Date(e).getTime(),a=Date.now(),o=Math.floor((a-t)/1e3);if(o<60)return`${o}s ago`;const s=Math.floor(o/60);if(s<60)return`${s}m ago`;const n=Math.floor(s/60);if(n<24)return`${n}h ago`;const l=Math.floor(n/24);return`${l}d ago`}function i(){t.post.media&&o.value>0&&(o.value--,n.value=t.post.media[o.value])}function v(){t.post.media&&o.value<t.post.media.length-1&&(o.value++,n.value=t.post.media[o.value])}function d(e){a.dispatch("postModule/likePost",e)}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",we,[(0,s.Lk)("div",be,[(0,s.Lk)("img",{src:e.post.user.avatar,alt:"",class:"avatar"},null,8,Ce),(0,s.Lk)("div",_e,[(0,s.Lk)("strong",null,(0,c.v_)(e.post.user.name),1),(0,s.Lk)("span",null,"@"+(0,c.v_)(e.post.username),1),(0,s.Lk)("span",Pe," ● "+(0,c.v_)(l(e.post.created_at)),1)])]),(0,s.Lk)("p",Me,(0,c.v_)(e.post.content),1),e.post.media&&e.post.media.length>0?((0,s.uX)(),(0,s.CE)("div",Se,[n.value?((0,s.uX)(),(0,s.CE)("img",{key:0,src:n.value.url,alt:n.value.type,class:"post-media"},null,8,Te)):(0,s.Q3)("",!0),e.post.media.length>1?((0,s.uX)(),(0,s.CE)("div",Ae,[(0,s.Lk)("button",{onClick:i},"‹"),(0,s.Lk)("button",{onClick:v},"›")])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Re,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>d(e.post.id)),class:(0,c.C4)({liked:e.post.is_liked})}," ❤️ "+(0,c.v_)(e.post.likes),3)])]))}});const Ie=(0,E.A)(Xe,[["__scopeId","data-v-deab5b20"]]);var Ke=Ie,$e=(0,s.pM)({__name:"PostList",setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>t.state.postModule.posts));return(0,s.sV)((()=>{t.dispatch("postModule/fetchPosts")})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.Wv)(Ke,{key:e.id,post:e},null,8,["post"])))),128))]))}});const xe=$e;var We=xe;const De={key:0,class:"tab-container"};var Fe=(0,s.pM)({__name:"PostBar",setup(e){const t=(0,r.Pj)(),a=(0,u.KR)("for-you"),o=(0,s.EW)((()=>t.getters["postModule/getAllPosts"])),n=(0,s.EW)((()=>o.value.length?o.value.slice(0,Math.ceil(o.value.length/2)):[])),l=(0,s.EW)((()=>o.value.length?o.value.slice(Math.ceil(o.value.length/2)):[])),i=(0,s.WQ)("isScrollingDown",(0,u.KR)(!1));return(e,t)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,c.C4)(["post-container",{expanded:(0,u.R1)(i),"with-margin":!(0,u.R1)(i)}])},[(0,u.R1)(i)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",De,[(0,s.Lk)("div",{class:(0,c.C4)({active:"for-you"===a.value}),id:"for-you",onClick:t[0]||(t[0]=e=>a.value="for-you")}," For You ",2),(0,s.Lk)("div",{class:(0,c.C4)({active:"following"===a.value}),id:"following",onClick:t[1]||(t[1]=e=>a.value="following")}," Following ",2)])),"for-you"===a.value?((0,s.uX)(),(0,s.Wv)(We,{key:1,posts:n.value},null,8,["posts"])):((0,s.uX)(),(0,s.Wv)(We,{key:2,posts:l.value},null,8,["posts"]))],2))}});const Be=(0,E.A)(Fe,[["__scopeId","data-v-1a4049ec"]]);var Oe=Be;const Ne={class:"main-page"},je={key:0,class:"logo-container"},Qe={key:1,class:"animated-text"},Ge={key:0,class:"container"},Ve={id:"news"};var Ue=(0,s.pM)({__name:"MainPage",setup(e){const t=(0,u.KR)(""),a=(0,u.KR)(!1),n=(0,u.KR)(!1),l=(0,r.Pj)(),v=(0,s.EW)((()=>l.state.auth.userName?.trim()||"Guest")),d=e=>{let a=0;t.value="";const o=setInterval((()=>{t.value+=e[a],a++,a===e.length&&clearInterval(o)}),50)};(0,s.sV)((()=>{setTimeout((()=>{a.value=!0,d(`Hello, ${v.value}!`),setTimeout((()=>{n.value=!0}),1200)}),1e3)}));const p=(0,u.KR)(!1);let m=0;const g=()=>{const e=document.body.scrollTop||document.documentElement.scrollTop;p.value=e>m,m=e};return(0,s.sV)((()=>{document.body.addEventListener("scroll",g)})),(0,s.hi)((()=>{document.body.removeEventListener("scroll",g)})),(0,s.Gt)("isScrollingDown",p),(e,l)=>((0,s.uX)(),(0,s.CE)("div",Ne,[a.value||n.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",je,l[0]||(l[0]=[(0,s.Lk)("img",{src:i,alt:"Logo",class:"logo"},null,-1)]))),a.value&&!n.value?((0,s.uX)(),(0,s.CE)("div",Qe,[(0,s.Lk)("h1",null,(0,c.v_)(t.value),1)])):(0,s.Q3)("",!0),(0,s.bF)(o.eB,{name:"fade"},{default:(0,s.k6)((()=>[n.value?((0,s.uX)(),(0,s.CE)("div",Ge,[(0,s.bF)(he),(0,s.bF)(Oe),(0,s.Lk)("div",Ve,[(0,s.bF)(Ee)])])):(0,s.Q3)("",!0)])),_:1})]))}});const Je=(0,E.A)(Ue,[["__scopeId","data-v-ff27423a"]]);var ze=Je,Ye=(0,s.pM)({name:"App",components:{LoginPage:T,MainPage:ze},setup(){const e=(0,r.Pj)(),t=(0,s.EW)((()=>e.getters["auth/isAuthenticated"]));return{isAuthenticated:t}}});const qe=(0,E.A)(Ye,[["render",l]]);var He=qe;const Ze="https://sunnytseng.com/api/relation/token/",et={account:sessionStorage.getItem("account")||"",userName:sessionStorage.getItem("userName")||"",avatar:"null"!==sessionStorage.getItem("avatar")&&sessionStorage.getItem("avatar")||"",token:sessionStorage.getItem("token")||null},tt={isAuthenticated(e){return!!e.token}},at={setAccount(e,t){e.account=t,sessionStorage.setItem("account",t)},setName(e,t){e.userName=t,sessionStorage.setItem("userName",t)},setAvatar(e,t){e.avatar=t,sessionStorage.setItem("avatar",t)},setToken(e,t){e.token=t,sessionStorage.setItem("token",t)},clearUser(e){e.userName="",e.avatar="",e.token=null,sessionStorage.removeItem("userName"),sessionStorage.removeItem("token"),sessionStorage.removeItem("avatar")}},ot={async login({commit:e},t){try{const a=await fetch(Ze,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Login failed");const o=await a.json();return e("setAccount",o.account),e("setName",o.name),e("setToken",o.access),e("setAvatar",o.avatar||""),o}catch(a){throw console.error(a),a}},logout({commit:e}){e("clearUser")}};var st={namespaced:!0,state:et,getters:tt,mutations:at,actions:ot};a(4520),a(2577);const nt="https://sunnytseng.com/api/relation/posts/",lt={posts:JSON.parse(localStorage.getItem("posts")||"[]"),account:localStorage.getItem("account")||"",userName:localStorage.getItem("userName")||"",token:localStorage.getItem("token")||null},rt={getAllPosts:e=>e.posts,getPostById:e=>t=>e.posts.find((e=>e.id===t))},it={SET_POSTS(e,t){e.posts=t.results},ADD_POST(e,t){e.posts.unshift(t)},LIKE_POST(e,t){const a=e.posts.find((e=>e.id===t));a&&(a.is_liked=!a.is_liked,a.likes+=a.is_liked?1:-1)},RETWEET_POST(e,t){const a=e.posts.find((e=>e.id===t));a&&(a.is_retweeted=!a.is_retweeted,a.retweets+=a.is_retweeted?1:-1)},DELETE_POST(e,t){e.posts=e.posts.filter((e=>e.id!==t))}},ut={async fetchPosts({commit:e,rootState:t,getters:a}){try{const o=t.auth.token||a["auth/isAuthenticated"];if(!o)throw new Error("No authentication token found");const s=await fetch(nt,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}});if(!s.ok)throw new Error(`Failed to fetch posts: ${s.status} ${s.statusText}`);const n=await s.json();e("SET_POSTS",n)}catch(o){console.error("Error fetching posts:",o)}},async createPost({commit:e,rootState:t},a){try{const o=t.auth.token;if(!o)throw new Error("Please login");const s=new FormData;s.append("text",a.content),a.images.forEach((e=>{s.append("images",e)}));const n=await fetch(nt,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:s});if(!n.ok){const e=await n.text();throw new Error(`Failed to create post: ${e}`)}const l=await n.json();e("ADD_POST",l)}catch(o){throw console.error("Error creating post:",o),o}},async likePost({commit:e},t){try{const a=await fetch(`${nt}${t}/like`,{method:"PUT"});if(!a.ok)throw new Error("Failed to like post");e("LIKE_POST",t)}catch(a){console.error("Error liking post:",a)}},async retweetPost({commit:e},t){try{const a=await fetch(`${nt}${t}/retweet`,{method:"PUT"});if(!a.ok)throw new Error("Failed to retweet post");e("RETWEET_POST",t)}catch(a){console.error("Error retweeting post:",a)}},async deletePost({commit:e},t){try{const a=await fetch(`${nt}${t}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete post");e("DELETE_POST",t)}catch(a){console.error("Error deleting post:",a)}}},ct={namespaced:!0,state:lt,getters:rt,mutations:it,actions:ut};var vt=(0,r.y$)({modules:{auth:st,postModule:ct}});(0,o.Ef)(He).use(vt).mount("#app")}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,n){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],s=e[c][1],n=e[c][2];for(var r=!0,i=0;i<o.length;i++)(!1&n||l>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[i])}))?o.splice(i--,1):(r=!1,n<l&&(l=n));if(r){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,n,l=o[0],r=o[1],i=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(i)var c=i(a)}for(t&&t(o);u<l.length;u++)n=l[u],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},o=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5989)}));o=a.O(o)})();
//# sourceMappingURL=app.42a86232.js.map