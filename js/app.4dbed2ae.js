(function(){"use strict";var e={101:function(e,t,a){var o=a(5130),s=a(6768);const n={id:"app"};function l(e,t,a,o,l,r){const i=(0,s.g2)("LoginPage"),c=(0,s.g2)("MainPage");return(0,s.uX)(),(0,s.CE)("div",n,[e.isAuthenticated?((0,s.uX)(),(0,s.Wv)(c,{key:1})):((0,s.uX)(),(0,s.Wv)(i,{key:0}))])}var r=a(782),i=a.p+"img/logo.1a43b2bb.png",c=a(144),u=a(4232);const d={class:"login-container"},v={class:"buttons"},p={class:"modal-content"},f={key:0,class:"error-message"},m={class:"form-group"},g={class:"form-group"},h=["disabled"],k={key:0,class:"spinner"},L={key:1};var y=(0,s.pM)({__name:"LoginCard",props:{showLogin:Boolean,isLoading:Boolean,errorMessage:String},setup(e){const t=(0,c.KR)(""),a=(0,c.KR)("");return(n,l)=>((0,s.uX)(),(0,s.CE)("div",d,[l[14]||(l[14]=(0,s.Lk)("h1",null,"Welcome to Relation!",-1)),l[15]||(l[15]=(0,s.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,s.Lk)("div",v,[l[6]||(l[6]=(0,s.Lk)("button",{class:"google"},"Sign in with Google",-1)),l[7]||(l[7]=(0,s.Lk)("button",{class:"apple"},"Sign in with Apple",-1)),(0,s.Lk)("button",{class:"login",onClick:l[0]||(l[0]=e=>n.$emit("toggleModal"))},"Login"),l[8]||(l[8]=(0,s.Lk)("div",{class:"divider"},"---- or ----",-1)),l[9]||(l[9]=(0,s.Lk)("p",{class:"signin"},"No account yet?",-1)),l[10]||(l[10]=(0,s.Lk)("button",{class:"create-account"},"Create Account",-1))]),e.showLogin?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"modal-overlay",onClick:l[5]||(l[5]=(0,o.D$)((e=>n.$emit("toggleModal")),["self"]))},[(0,s.Lk)("div",p,[(0,s.Lk)("button",{class:"close-btn",onClick:l[1]||(l[1]=e=>n.$emit("toggleModal"))},"×"),l[13]||(l[13]=(0,s.Lk)("h3",null,"Log In",-1)),e.errorMessage?((0,s.uX)(),(0,s.CE)("p",f,(0,u.v_)(e.errorMessage),1)):(0,s.Q3)("",!0),(0,s.Lk)("form",{onSubmit:l[4]||(l[4]=(0,o.D$)((e=>n.$emit("login",{username:t.value,password:a.value})),["prevent"]))},[(0,s.Lk)("div",m,[l[11]||(l[11]=(0,s.Lk)("label",{for:"account"},"Account",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":l[2]||(l[2]=e=>t.value=e),required:""},null,512),[[o.Jo,t.value]])]),(0,s.Lk)("div",g,[l[12]||(l[12]=(0,s.Lk)("label",{for:"password"},"Password",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":l[3]||(l[3]=e=>a.value=e),required:""},null,512),[[o.Jo,a.value]])]),(0,s.Lk)("button",{type:"submit",class:"submit-btn",disabled:e.isLoading},[e.isLoading?((0,s.uX)(),(0,s.CE)("span",k)):((0,s.uX)(),(0,s.CE)("span",L,"Confirm"))],8,h)],32)])])):(0,s.Q3)("",!0)]))}}),E=a(1241);const w=(0,E.A)(y,[["__scopeId","data-v-870424e8"]]);var b=w;const _={key:0,class:"icon"},C={key:1,class:"container"},P={class:"right-side"};var M=(0,s.pM)({__name:"LoginPage",setup(e){const t=(0,r.Pj)(),a=(0,c.KR)(!1),n=(0,c.KR)(!0),l=(0,c.KR)(!1),u=(0,c.KR)(""),d=()=>{a.value=!a.value,u.value=""},v=async e=>{l.value=!0,u.value="";try{await t.dispatch("auth/login",e);d(),n.value=!1}catch(a){console.error(a),u.value=a?.response?.data?.message||"Login failed. Please try again."}finally{l.value=!1}};return(0,s.sV)((()=>{setTimeout((()=>{n.value=!1}),1e3)})),(e,t)=>n.value?((0,s.uX)(),(0,s.CE)("div",_,t[0]||(t[0]=[(0,s.Lk)("img",{src:i,alt:"Logo",class:"icon-img"},null,-1)]))):((0,s.uX)(),(0,s.CE)("div",C,[(0,s.bF)(o.eB,{name:"left-slide",appear:""},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.Lk)("div",{class:"left-side"},[(0,s.Lk)("img",{src:i,alt:"logo",id:"logo"})],-1)]))),_:1}),(0,s.bF)(o.eB,{name:"right-slide",appear:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",P,[(0,s.bF)(b,{showLogin:a.value,isLoading:l.value,errorMessage:u.value,onToggleModal:d,onLogin:v},null,8,["showLogin","isLoading","errorMessage"])])])),_:1})]))}});const T=(0,E.A)(M,[["__scopeId","data-v-b0ced078"]]);var S=T;const I={class:"post-modal"},A={class:"game-modal"};function $(e,t,a,n,l,r){const c=(0,s.g2)("AccountMenu"),d=(0,s.g2)("PostBox"),v=(0,s.g2)("TileMatchingGame");return(0,s.uX)(),(0,s.CE)("div",{class:(0,u.C4)(["sidebar",{hidden:!e.isVisible}])},[t[5]||(t[5]=(0,s.Fv)('<img id="nav-item" src="'+i+'" alt="icon" data-v-4e8d0776><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-home" data-v-4e8d0776></i><span data-v-4e8d0776>Home</span></a><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-search" data-v-4e8d0776></i><span data-v-4e8d0776>Explore</span></a><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-bell" data-v-4e8d0776></i><span data-v-4e8d0776>Notifications</span></a><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-envelope" data-v-4e8d0776></i><span data-v-4e8d0776>Messages</span></a><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-gamepad" data-v-4e8d0776></i><span data-v-4e8d0776>Game</span></a><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-user" data-v-4e8d0776></i><span data-v-4e8d0776>Profile</span></a><a class="menu-item" href="#" data-v-4e8d0776><i class="fas fa-ellipsis-h" data-v-4e8d0776></i><span data-v-4e8d0776>More</span></a>',8)),(0,s.Lk)("a",{class:"post-button",href:"#",onClick:t[0]||(t[0]=(0,o.D$)((t=>e.showPostBox=!0),["prevent"]))},"Post"),(0,s.bF)(c),e.showPostBox?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"post-modal-overlay",onClick:t[2]||(t[2]=(0,o.D$)(((...t)=>e.closePostBox&&e.closePostBox(...t)),["self"]))},[(0,s.Lk)("div",I,[(0,s.Lk)("button",{class:"post-close-btn",onClick:t[1]||(t[1]=(...t)=>e.closePostBox&&e.closePostBox(...t))},"×"),(0,s.bF)(d)])])):(0,s.Q3)("",!0),e.showGameModal?((0,s.uX)(),(0,s.CE)("div",{key:1,class:"game-modal-overlay",onClick:t[4]||(t[4]=(0,o.D$)(((...t)=>e.closeModal&&e.closeModal(...t)),["self"]))},[(0,s.Lk)("div",A,[(0,s.Lk)("button",{class:"close-btn",onClick:t[3]||(t[3]=(...t)=>e.closeModal&&e.closeModal(...t))},"×"),(0,s.bF)(v)])])):(0,s.Q3)("",!0)],2)}const X={class:"game-container"},K={class:"game-board"},R=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function x(e,t,a,n,l,r){return(0,s.uX)(),(0,s.CE)("div",X,[t[2]||(t[2]=(0,s.Lk)("h1",null,"轉珠遊戲",-1)),(0,s.Lk)("div",K,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.board,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a,class:"row"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,((e,l)=>((0,s.uX)(),(0,s.CE)("div",{key:l,class:(0,u.C4)(["cell",`type-${e}`,{exploding:n.isExploding(a,l)}]),style:(0,u.Tr)(n.getCellStyle(a,l)),onMousedown:e=>n.startDrag(a,l,e),onMousemove:e=>n.drag(a,l,e),onMouseup:t[0]||(t[0]=(...e)=>n.endDrag&&n.endDrag(...e)),onTouchstart:e=>n.startDrag(a,l,e),onTouchmove:(0,o.D$)((e=>n.drag(a,l,e)),["prevent"]),onTouchend:t[1]||(t[1]=(...e)=>n.endDrag&&n.endDrag(...e))},null,46,R)))),128))])))),128))])])}a(4114),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698),a(8992),a(3949),a(1454),a(7550);var O={setup(){const e=5,t=6,a=(0,c.KR)(s()),o=(0,c.KR)([]);function s(){return Array.from({length:e},(()=>Array.from({length:t},(()=>Math.floor(3*Math.random())))))}const n=(0,c.KR)(!1),l=(0,c.KR)(null),r=(0,c.KR)(null),i=(0,c.KR)([]),u=(e,t,a)=>{n.value=!0,l.value=e,r.value=t,i.value=[[e,t]]},d=(e,t,o)=>{if(!n.value)return;const s=i.value[i.value.length-1];(1===Math.abs(e-s[0])&&t===s[1]||1===Math.abs(t-s[1])&&e===s[0])&&([a.value[e][t],a.value[s[0]][s[1]]]=[a.value[s[0]][s[1]],a.value[e][t]],i.value.push([e,t]))},v=()=>{n.value=!1,f()?setTimeout((()=>{m(),setTimeout(g,300)}),300):p()},p=()=>{for(let e=i.value.length-1;e>0;e--){const[t,o]=i.value[e],[s,n]=i.value[e-1];[a.value[t][o],a.value[s][n]]=[a.value[s][n],a.value[t][o]]}},f=()=>{const s=new Set;for(let o=0;o<e;o++){let e=1;for(let n=1;n<t;n++)if(a.value[o][n]===a.value[o][n-1])e++;else{if(e>=3)for(let t=0;t<e;t++)s.add(`${o},${n-1-t}`);e=1}if(e>=3)for(let a=0;a<e;a++)s.add(`${o},${t-1-a}`)}for(let o=0;o<t;o++){let t=1;for(let n=1;n<e;n++)if(a.value[n][o]===a.value[n-1][o])t++;else{if(t>=3)for(let e=0;e<t;e++)s.add(`${n-1-e},${o}`);t=1}if(t>=3)for(let a=0;a<t;a++)s.add(`${e-1-a},${o}`)}return o.value=Array.from(s).map((e=>{const[t,a]=e.split(",").map(Number);return{row:t,col:a}})),o.value.length>0},m=()=>{o.value.forEach((({row:e,col:t})=>{a.value[e][t]=null})),o.value=[]},g=()=>{for(let o=0;o<t;o++){let t=0;for(let s=e-1;s>=0;s--)null===a.value[s][o]?t++:t>0&&(a.value[s+t][o]=a.value[s][o],a.value[s][o]=null);for(let e=0;e<t;e++)a.value[e][o]=Math.floor(3*Math.random())}f()&&setTimeout((()=>{m(),setTimeout(g,300)}),300)},h=(e,t)=>o.value.some((a=>a.row===e&&a.col===t)),k=(e,t)=>null===a.value[e][t]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:a,startDrag:u,drag:d,endDrag:v,isExploding:h,getCellStyle:k}}};const F=(0,E.A)(O,[["render",x],["__scopeId","data-v-315819a8"]]);var D=F,W=a.p+"img/male.79b1906c.png";const N={class:"account-profile"},j={key:0,class:"overlay-div"},B={class:"overlay-content"},G=["src"];var V={__name:"AccountProfile",props:{profileImage:{type:String,default:""},name:{type:String,default:"Guest"},friendCount:{type:Number,default:0}},setup(e){const t=(0,c.KR)(!1),a=()=>{t.value=!t.value},n=e,l=(0,s.EW)((()=>n.profileImage||W)),r=(0,s.EW)((()=>n.name||"Guest")),i=(0,s.EW)((()=>n.friendCount||0));return(e,n)=>((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("p",{class:"setting-style",onClick:(0,o.D$)(a,["stop"])},"Account Profile"),t.value?((0,s.uX)(),(0,s.CE)("div",j,[(0,s.Lk)("div",B,[(0,s.Lk)("img",{src:l.value,alt:"Profile Picture",class:"overlay-profile-image"},null,8,G),(0,s.Lk)("h4",null,(0,u.v_)(r.value),1),(0,s.Lk)("p",null,"Friends: "+(0,u.v_)(i.value),1)])])):(0,s.Q3)("",!0)]))}};const Q=(0,E.A)(V,[["__scopeId","data-v-f56b5f06"]]);var U=Q;const J={class:"profile-container"},Y=["src"],q={class:"profile-info"};var H=(0,s.pM)({__name:"AccountMenu",setup(e){const t=(0,r.Pj)(),a=(0,c.KR)(!1),o=(0,c.KR)(0),n=(0,s.EW)((()=>t.state.auth.account?.trim()||"_Account_")),l=(0,s.EW)((()=>t.state.auth.userName?.trim()||"Guest")),i=(0,s.EW)((()=>{const e=t.state.auth.avatar?.trim();return e||W})),d=()=>{a.value=!a.value},v=e=>{const t=document.querySelector(".profile-component");t&&!t.contains(e.target)&&(a.value=!1)};(0,s.sV)((()=>{document.addEventListener("click",v)}));const p=()=>{t.dispatch("auth/logout")};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",J,[(0,s.Lk)("div",{class:"profile-component",onClick:d},[(0,s.Lk)("img",{src:i.value,alt:"Profile Picture",class:"profile-image"},null,8,Y),(0,s.Lk)("div",q,[(0,s.Lk)("h3",null,(0,u.v_)(l.value),1),(0,s.Lk)("p",null,"_"+(0,u.v_)(n.value)+"_",1)]),(0,s.Lk)("div",{class:(0,u.C4)(["menu-dropdown",{active:a.value}])},[(0,s.bF)(U,{name:l.value,profileImage:i.value,friendsCount:o.value},null,8,["name","profileImage","friendsCount"]),t[0]||(t[0]=(0,s.Lk)("p",null,"Setting",-1)),(0,s.Lk)("button",{class:"logout-btn",onClick:p},"Logout "+(0,u.v_)(l.value),1)],2)])]))}});const z=(0,E.A)(H,[["__scopeId","data-v-6ec66d62"]]);var Z=z;const ee={class:"post-box"},te={class:"user-info"},ae=["src"],oe={class:"post-actions"},se={class:"icons"},ne=["disabled"];var le={__name:"PostBox",setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>{const e=t.state.auth.avatar?.trim();return e||W})),n=(0,c.KR)(""),l=(0,c.KR)(null),i=()=>{(0,s.dY)((()=>{l.value&&(l.value.style.height="auto",l.value.style.height=`${l.value.scrollHeight}px`)}))};(0,s.sV)((()=>{i()}));const d=(0,c.KR)(["fas fa-image","fas fa-chart-bar","fas fa-list-ul","fas fa-smile","fas fa-clock","fas fa-map-marker-alt"]),v=()=>{alert(`Relation posted: ${n.value}`),n.value="",i()};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("img",{src:a.value,alt:"User avatar",class:"avatar"},null,8,ae),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),placeholder:"What is happening?!",class:"post-input",rows:"1",ref_key:"textareaRef",ref:l,onInput:i},null,544),[[o.Jo,n.value]])]),(0,s.Lk)("div",oe,[(0,s.Lk)("div",se,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:"icon-btn"},[(0,s.Lk)("i",{class:(0,u.C4)(e)},null,2)])))),128))]),(0,s.Lk)("button",{class:"post-btn",disabled:!n.value.trim(),onClick:v}," Post ",8,ne)])]))}};const re=(0,E.A)(le,[["__scopeId","data-v-61643b86"]]);var ie=re,ce=(0,s.pM)({name:"NavBar",components:{AccountMenu:Z,TileMatchingGame:D,PostBox:ie},setup(){const e=(0,c.KR)(!1),t=(0,c.KR)(!1),a=()=>{e.value=!1},o=()=>{t.value=!1},n=(0,c.KR)(!0);let l=0;const r=()=>{if(window.innerWidth>768)return void(n.value=!0);const e=window.pageYOffset||document.documentElement.scrollTop;n.value=!(e>l),l=e};return(0,s.sV)((()=>{window.addEventListener("scroll",r)})),(0,s.hi)((()=>{window.removeEventListener("scroll",r)})),{showPostBox:e,closePostBox:a,showGameModal:t,closeModal:o,isVisible:n}}});const ue=(0,E.A)(ce,[["render",$],["__scopeId","data-v-4e8d0776"]]);var de=ue;function ve(e,t){return" -- NEWS BAR -- "}const pe={},fe=(0,E.A)(pe,[["render",ve]]);var me=fe;const ge={class:"post"},he={class:"post-header"},ke=["src"],Le={class:"post-info"},ye={class:"post-time"},Ee={class:"post-content"},we={key:0},be=["src","alt"],_e={class:"post-actions"};var Ce=(0,s.pM)({__name:"PostItem",props:{post:{}},setup(e){const t=(0,r.Pj)();function a(e){const t=new Date(e).getTime(),a=Date.now(),o=Math.floor((a-t)/1e3);if(o<60)return`${o}s ago`;const s=Math.floor(o/60);if(s<60)return`${s}m ago`;const n=Math.floor(s/60);if(n<24)return`${n}h ago`;const l=Math.floor(n/24);return`${l}d ago`}function o(e){t.dispatch("postModule/likePost",e)}function n(e){t.dispatch("postModule/retweetPost",e)}function l(e){t.dispatch("postModule/deletePost",e)}return(e,t)=>((0,s.uX)(),(0,s.CE)("div",ge,[(0,s.Lk)("div",he,[(0,s.Lk)("img",{src:e.post.user.avatar,alt:"",class:"avatar"},null,8,ke),(0,s.Lk)("div",Le,[(0,s.Lk)("strong",null,(0,u.v_)(e.post.user.name),1),(0,s.Lk)("span",null,"@"+(0,u.v_)(e.post.username),1),(0,s.Lk)("span",ye," ● "+(0,u.v_)(a(e.post.created_at)),1)])]),(0,s.Lk)("p",Ee,(0,u.v_)(e.post.content),1),e.post.media&&e.post.media.length>0?((0,s.uX)(),(0,s.CE)("div",we,[(0,s.Lk)("img",{src:e.post.media[0].url,alt:e.post.media[0].type,class:"post-media"},null,8,be)])):(0,s.Q3)("",!0),(0,s.Lk)("div",_e,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>o(e.post.id)),class:(0,u.C4)({liked:e.post.is_liked})}," ❤️ "+(0,u.v_)(e.post.likes),3),(0,s.Lk)("button",{onClick:t[1]||(t[1]=t=>n(e.post.id)),class:(0,u.C4)({retweeted:e.post.is_retweeted})}," 🔁 "+(0,u.v_)(e.post.retweets),3),(0,s.Lk)("button",{onClick:t[2]||(t[2]=t=>l(e.post.id))},"🗑️")])]))}});const Pe=(0,E.A)(Ce,[["__scopeId","data-v-b4d48e60"]]);var Me=Pe,Te=(0,s.pM)({__name:"PostList",setup(e){const t=(0,r.Pj)(),a=(0,s.EW)((()=>t.state.postModule.posts));return(0,s.sV)((()=>{t.dispatch("postModule/fetchPosts")})),(e,t)=>((0,s.uX)(),(0,s.CE)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.value,(e=>((0,s.uX)(),(0,s.Wv)(Me,{key:e.id,post:e},null,8,["post"])))),128))]))}});const Se=Te;var Ie=Se;const Ae={class:"post-container"},$e={class:"tab-container"};var Xe=(0,s.pM)({__name:"PostBar",setup(e){const t=(0,r.Pj)(),a=(0,c.KR)("for-you"),o=(0,s.EW)((()=>t.getters["postModule/getAllPosts"])),n=(0,s.EW)((()=>o.value.length?o.value.slice(0,Math.ceil(o.value.length/2)):[])),l=(0,s.EW)((()=>o.value.length?o.value.slice(Math.ceil(o.value.length/2)):[]));return(e,t)=>((0,s.uX)(),(0,s.CE)("div",Ae,[(0,s.Lk)("div",$e,[(0,s.Lk)("div",{class:(0,u.C4)({active:"for-you"===a.value}),id:"for-you",onClick:t[0]||(t[0]=e=>a.value="for-you")}," For You ",2),(0,s.Lk)("div",{class:(0,u.C4)({active:"following"===a.value}),id:"following",onClick:t[1]||(t[1]=e=>a.value="following")}," Following ",2)]),"for-you"===a.value?((0,s.uX)(),(0,s.Wv)(Ie,{key:0,posts:n.value},null,8,["posts"])):((0,s.uX)(),(0,s.Wv)(Ie,{key:1,posts:l.value},null,8,["posts"]))]))}});const Ke=(0,E.A)(Xe,[["__scopeId","data-v-0f8e8f99"]]);var Re=Ke;const xe={class:"main-page"},Oe={key:0,class:"logo-container"},Fe={key:1,class:"animated-text"},De={key:0,class:"container"},We={id:"news"};var Ne=(0,s.pM)({__name:"MainPage",setup(e){const t=(0,c.KR)(""),a=(0,c.KR)(!1),n=(0,c.KR)(!1),l=(0,r.Pj)(),d=(0,s.EW)((()=>l.state.auth.userName?.trim()||"Guest")),v=e=>{let a=0;t.value="";const o=setInterval((()=>{t.value+=e[a],a++,a===e.length&&clearInterval(o)}),50)};return(0,s.sV)((()=>{setTimeout((()=>{a.value=!0,v(`Hello, ${d.value}!`),setTimeout((()=>{n.value=!0}),1200)}),1e3)})),(e,l)=>((0,s.uX)(),(0,s.CE)("div",xe,[a.value||n.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Oe,l[0]||(l[0]=[(0,s.Lk)("img",{src:i,alt:"Logo",class:"logo"},null,-1)]))),a.value&&!n.value?((0,s.uX)(),(0,s.CE)("div",Fe,[(0,s.Lk)("h1",null,(0,u.v_)(t.value),1)])):(0,s.Q3)("",!0),(0,s.bF)(o.eB,{name:"fade"},{default:(0,s.k6)((()=>[n.value?((0,s.uX)(),(0,s.CE)("div",De,[(0,s.bF)(de),(0,s.bF)(Re),(0,s.Lk)("div",We,[(0,s.bF)(me)])])):(0,s.Q3)("",!0)])),_:1})]))}});const je=(0,E.A)(Ne,[["__scopeId","data-v-3622e1a1"]]);var Be=je,Ge=(0,s.pM)({name:"App",components:{LoginPage:S,MainPage:Be},setup(){const e=(0,r.Pj)(),t=(0,s.EW)((()=>e.getters["auth/isAuthenticated"]));return{isAuthenticated:t}}});const Ve=(0,E.A)(Ge,[["render",l]]);var Qe=Ve;const Ue="https://home.sunnytseng.com/api/relation/token/",Je={account:localStorage.getItem("account")||"",userName:localStorage.getItem("userName")||"",avatar:"null"!==localStorage.getItem("avatar")&&localStorage.getItem("avatar")||"",token:localStorage.getItem("token")||null},Ye={isAuthenticated(e){return!!e.token}},qe={setAccount(e,t){e.account=t,localStorage.setItem("account",t)},setName(e,t){e.userName=t,localStorage.setItem("userName",t)},setAvatar(e,t){e.avatar=t,localStorage.setItem("avatar",t)},setToken(e,t){e.token=t,localStorage.setItem("token",t)},clearUser(e){e.userName="",e.avatar="",e.token=null,localStorage.removeItem("userName"),localStorage.removeItem("token"),localStorage.removeItem("avatar")}},He={async login({commit:e},t){try{const a=await fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Login failed");const o=await a.json();return e("setAccount",o.account),e("setName",o.name),e("setToken",o.access),e("setAvatar",o.avatar||""),o}catch(a){throw console.error(a),a}},logout({commit:e}){e("clearUser")}};var ze={namespaced:!0,state:Je,getters:Ye,mutations:qe,actions:He};a(4520),a(2577);const Ze="https://home.sunnytseng.com/api/relation/posts/",et={posts:JSON.parse(localStorage.getItem("posts")||"[]"),account:localStorage.getItem("account")||"",userName:localStorage.getItem("userName")||"",token:localStorage.getItem("token")||null},tt={getAllPosts:e=>e.posts,getPostById:e=>t=>e.posts.find((e=>e.id===t))},at={SET_POSTS(e,t){e.posts=t.results},ADD_POST(e,t){e.posts.unshift(t)},LIKE_POST(e,t){const a=e.posts.find((e=>e.id===t));a&&(a.is_liked=!a.is_liked,a.likes+=a.is_liked?1:-1)},RETWEET_POST(e,t){const a=e.posts.find((e=>e.id===t));a&&(a.is_retweeted=!a.is_retweeted,a.retweets+=a.is_retweeted?1:-1)},DELETE_POST(e,t){e.posts=e.posts.filter((e=>e.id!==t))}},ot={async fetchPosts({commit:e,state:t}){try{if(!t.token)throw new Error("No authentication token found");const a=await fetch(Ze,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.token}`}});if(!a.ok)throw new Error(`Failed to fetch posts: ${a.status} ${a.statusText}`);const o=await a.json();console.log("fetchPosts data:",o),e("SET_POSTS",o)}catch(a){console.error("Error fetching posts:",a)}},async createPost({commit:e},t){try{const a=await fetch(Ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to create post");const o=await a.json();e("ADD_POST",o)}catch(a){console.error("Error creating post:",a)}},async likePost({commit:e},t){try{const a=await fetch(`${Ze}${t}/like`,{method:"PUT"});if(!a.ok)throw new Error("Failed to like post");e("LIKE_POST",t)}catch(a){console.error("Error liking post:",a)}},async retweetPost({commit:e},t){try{const a=await fetch(`${Ze}${t}/retweet`,{method:"PUT"});if(!a.ok)throw new Error("Failed to retweet post");e("RETWEET_POST",t)}catch(a){console.error("Error retweeting post:",a)}},async deletePost({commit:e},t){try{const a=await fetch(`${Ze}${t}`,{method:"DELETE"});if(!a.ok)throw new Error("Failed to delete post");e("DELETE_POST",t)}catch(a){console.error("Error deleting post:",a)}}},st={namespaced:!0,state:et,getters:tt,mutations:at,actions:ot};var nt=(0,r.y$)({modules:{auth:ze,postModule:st}});(0,o.Ef)(Qe).use(nt).mount("#app")}},t={};function a(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,o,s,n){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],n=e[u][2];for(var r=!0,i=0;i<o.length;i++)(!1&n||l>=n)&&Object.keys(a.O).every((function(e){return a.O[e](o[i])}))?o.splice(i--,1):(r=!1,n<l&&(l=n));if(r){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.p="/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,n,l=o[0],r=o[1],i=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(s in r)a.o(r,s)&&(a.m[s]=r[s]);if(i)var u=i(a)}for(t&&t(o);c<l.length;c++)n=l[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(101)}));o=a.O(o)})();
//# sourceMappingURL=app.4dbed2ae.js.map