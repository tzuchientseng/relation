(function(){"use strict";var a={8025:function(a,e,t){var o=t(5130),n=t(6768);const l={id:"app"};function s(a,e,t,o,s,r){const i=(0,n.g2)("LoginPage"),u=(0,n.g2)("MainPage");return(0,n.uX)(),(0,n.CE)("div",l,[a.isAuthenticated?((0,n.uX)(),(0,n.Wv)(u,{key:1})):((0,n.uX)(),(0,n.Wv)(i,{key:0}))])}var r=t(782),i=t.p+"img/logo.1a43b2bb.png",u=t(144);const c={class:"login-container"},d={class:"buttons"},v={class:"modal-content"},f={class:"form-group"},p={class:"form-group"};var b=(0,n.pM)({__name:"LoginCard",props:{showLogin:{type:Boolean}},setup(a){const e=(0,u.KR)(""),t=(0,u.KR)("");return(a,l)=>((0,n.uX)(),(0,n.CE)("div",c,[l[12]||(l[12]=(0,n.Lk)("h1",null,"Welcome to Relation!",-1)),l[13]||(l[13]=(0,n.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,n.Lk)("div",d,[l[6]||(l[6]=(0,n.Fv)('<button class="google" data-v-611bb4b1>Sign in with Google</button><button class="apple" data-v-611bb4b1>Sign in with Apple</button><div class="divider" data-v-611bb4b1>---- or ----</div><button class="create-account" data-v-611bb4b1>Create Account</button><p class="signin" data-v-611bb4b1>Already have an account?</p>',5)),(0,n.Lk)("button",{class:"login",onClick:l[0]||(l[0]=e=>a.$emit("toggleModal"))},"Login")]),a.showLogin?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal-overlay",onClick:l[5]||(l[5]=(0,o.D$)((e=>a.$emit("toggleModal")),["self"]))},[(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"close-btn",onClick:l[1]||(l[1]=e=>a.$emit("toggleModal"))},"×"),l[10]||(l[10]=(0,n.Lk)("h3",null,"Log In",-1)),(0,n.Lk)("form",{onSubmit:l[4]||(l[4]=(0,o.D$)((o=>a.$emit("login",{username:e.value,password:t.value})),["prevent"]))},[(0,n.Lk)("div",f,[l[7]||(l[7]=(0,n.Lk)("label",{for:"account"},"Account",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":l[2]||(l[2]=a=>e.value=a),placeholder:"Enter your account",required:"",autocomplete:"username"},null,512),[[o.Jo,e.value]])]),(0,n.Lk)("div",p,[l[8]||(l[8]=(0,n.Lk)("label",{for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":l[3]||(l[3]=a=>t.value=a),placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,512),[[o.Jo,t.value]])]),l[9]||(l[9]=(0,n.Lk)("button",{type:"submit",class:"submit-btn"},"Confirm",-1))],32),l[11]||(l[11]=(0,n.Lk)("p",null,[(0,n.eW)("Don't have an account? "),(0,n.Lk)("a",{href:"#"},"Sign Up")],-1))])])):(0,n.Q3)("",!0)]))}}),m=t(1241);const g=(0,m.A)(b,[["__scopeId","data-v-611bb4b1"]]);var h=g;const k={class:"container"},L={class:"right-side"};var y=(0,n.pM)({__name:"LoginPage",setup(a){const e=(0,r.Pj)(),t=(0,u.KR)(!1),o=()=>{t.value=!t.value},l=async a=>{try{await e.dispatch("auth/login",a);o()}catch(t){console.error(t),alert("Login failed. Please try again.")}};return(a,e)=>((0,n.uX)(),(0,n.CE)("div",k,[e[0]||(e[0]=(0,n.Lk)("div",{class:"left-side"},[(0,n.Lk)("img",{src:i,alt:"logo",id:"logo"})],-1)),(0,n.Lk)("div",L,[(0,n.bF)(h,{showLogin:t.value,onToggleModal:o,onLogin:l},null,8,["showLogin"])])]))}});const w=(0,m.A)(y,[["__scopeId","data-v-3bd1a8c0"]]);var M=w;const C={id:"app"},_={class:"container"},A={id:"news"};function E(a,e,t,o,l,s){const r=(0,n.g2)("NavBar"),i=(0,n.g2)("NewsBar");return(0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",_,[(0,n.bF)(r),e[0]||(e[0]=(0,n.Lk)("div",{id:"posts"},"Posts",-1)),(0,n.Lk)("div",A,[(0,n.bF)(i)])])])}const P={class:"sidebar"},T={class:"game-modal"};function S(a,e,t,l,s,r){const u=(0,n.g2)("AccountMenu"),c=(0,n.g2)("TileMatchingGame");return(0,n.uX)(),(0,n.CE)("div",P,[e[4]||(e[4]=(0,n.Fv)('<img id="nav-item" src="'+i+'" alt="icon" data-v-162bb9f8><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-home" data-v-162bb9f8></i><span data-v-162bb9f8>Home</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-search" data-v-162bb9f8></i><span data-v-162bb9f8>Explore</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-bell" data-v-162bb9f8></i><span data-v-162bb9f8>Notifications</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-envelope" data-v-162bb9f8></i><span data-v-162bb9f8>Messages</span></a>',5)),(0,n.Lk)("a",{class:"menu-item",href:"#",onClick:e[0]||(e[0]=e=>a.showGameModal=!0)},e[3]||(e[3]=[(0,n.Lk)("i",{class:"fas fa-gamepad"},null,-1),(0,n.Lk)("span",null,"Game",-1)])),e[5]||(e[5]=(0,n.Fv)('<a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-bookmark" data-v-162bb9f8></i><span data-v-162bb9f8>Bookmarks</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-users" data-v-162bb9f8></i><span data-v-162bb9f8>Communities</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-star" data-v-162bb9f8></i><span data-v-162bb9f8>Premium</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-user" data-v-162bb9f8></i><span data-v-162bb9f8>Profile</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-ellipsis-h" data-v-162bb9f8></i><span data-v-162bb9f8>More</span></a><a class="post-button" href="#" data-v-162bb9f8>Post</a>',6)),(0,n.bF)(u),a.showGameModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"game-modal-overlay",onClick:e[2]||(e[2]=(0,o.D$)(((...e)=>a.closeModal&&a.closeModal(...e)),["self"]))},[(0,n.Lk)("div",T,[(0,n.Lk)("button",{class:"close-btn",onClick:e[1]||(e[1]=(...e)=>a.closeModal&&a.closeModal(...e))},"×"),(0,n.bF)(c)])])):(0,n.Q3)("",!0)])}var $=t(4232);const I={class:"game-container"},K={class:"game-board"},R=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function X(a,e,t,l,s,r){return(0,n.uX)(),(0,n.CE)("div",I,[e[2]||(e[2]=(0,n.Lk)("h1",null,"轉珠遊戲",-1)),(0,n.Lk)("div",K,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.board,((a,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a,((a,s)=>((0,n.uX)(),(0,n.CE)("div",{key:s,class:(0,$.C4)(["cell",`type-${a}`,{exploding:l.isExploding(t,s)}]),style:(0,$.Tr)(l.getCellStyle(t,s)),onMousedown:a=>l.startDrag(t,s,a),onMousemove:a=>l.drag(t,s,a),onMouseup:e[0]||(e[0]=(...a)=>l.endDrag&&l.endDrag(...a)),onTouchstart:a=>l.startDrag(t,s,a),onTouchmove:(0,o.D$)((a=>l.drag(t,s,a)),["prevent"]),onTouchend:e[1]||(e[1]=(...a)=>l.endDrag&&l.endDrag(...a))},null,46,R)))),128))])))),128))])])}t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(8992),t(3949),t(1454),t(7550);var F={setup(){const a=5,e=6,t=(0,u.KR)(n()),o=(0,u.KR)([]);function n(){return Array.from({length:a},(()=>Array.from({length:e},(()=>Math.floor(3*Math.random())))))}const l=(0,u.KR)(!1),s=(0,u.KR)(null),r=(0,u.KR)(null),i=(0,u.KR)([]),c=(a,e,t)=>{l.value=!0,s.value=a,r.value=e,i.value=[[a,e]]},d=(a,e,o)=>{if(!l.value)return;const n=i.value[i.value.length-1];(1===Math.abs(a-n[0])&&e===n[1]||1===Math.abs(e-n[1])&&a===n[0])&&([t.value[a][e],t.value[n[0]][n[1]]]=[t.value[n[0]][n[1]],t.value[a][e]],i.value.push([a,e]))},v=()=>{l.value=!1,p()?setTimeout((()=>{b(),setTimeout(m,300)}),300):f()},f=()=>{for(let a=i.value.length-1;a>0;a--){const[e,o]=i.value[a],[n,l]=i.value[a-1];[t.value[e][o],t.value[n][l]]=[t.value[n][l],t.value[e][o]]}},p=()=>{const n=new Set;for(let o=0;o<a;o++){let a=1;for(let l=1;l<e;l++)if(t.value[o][l]===t.value[o][l-1])a++;else{if(a>=3)for(let e=0;e<a;e++)n.add(`${o},${l-1-e}`);a=1}if(a>=3)for(let t=0;t<a;t++)n.add(`${o},${e-1-t}`)}for(let o=0;o<e;o++){let e=1;for(let l=1;l<a;l++)if(t.value[l][o]===t.value[l-1][o])e++;else{if(e>=3)for(let a=0;a<e;a++)n.add(`${l-1-a},${o}`);e=1}if(e>=3)for(let t=0;t<e;t++)n.add(`${a-1-t},${o}`)}return o.value=Array.from(n).map((a=>{const[e,t]=a.split(",").map(Number);return{row:e,col:t}})),o.value.length>0},b=()=>{o.value.forEach((({row:a,col:e})=>{t.value[a][e]=null})),o.value=[]},m=()=>{for(let o=0;o<e;o++){let e=0;for(let n=a-1;n>=0;n--)null===t.value[n][o]?e++:e>0&&(t.value[n+e][o]=t.value[n][o],t.value[n][o]=null);for(let a=0;a<e;a++)t.value[a][o]=Math.floor(3*Math.random())}p()&&setTimeout((()=>{b(),setTimeout(m,300)}),300)},g=(a,e)=>o.value.some((t=>t.row===a&&t.col===e)),h=(a,e)=>null===t.value[a][e]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:t,startDrag:c,drag:d,endDrag:v,isExploding:g,getCellStyle:h}}};const j=(0,m.A)(F,[["render",X],["__scopeId","data-v-315819a8"]]);var D=j,O=t.p+"img/male.79b1906c.png";const x={key:0,class:"overlay-div"},N={class:"overlay-content"},B=["src"];var G={__name:"AccountProfile",props:{profileImage:{type:String,required:!0},name:{type:String,required:!0},friendCount:{type:Number,required:!0}},setup(a){const e=(0,u.KR)(!1),t=()=>{e.value=!e.value};return(o,l)=>((0,n.uX)(),(0,n.CE)("div",{class:"account-profile",onClick:t},[l[0]||(l[0]=(0,n.Lk)("p",{class:"setting-style"},"Account Profile",-1)),e.value?((0,n.uX)(),(0,n.CE)("div",x,[(0,n.Lk)("div",{class:"overlay-backdrop",onClick:t}),(0,n.Lk)("div",N,[(0,n.Lk)("img",{src:a.profileImage,alt:"Profile Picture",class:"overlay-profile-image"},null,8,B),(0,n.Lk)("h4",null,(0,$.v_)(a.name),1),(0,n.Lk)("p",null,"Friend: "+(0,$.v_)(a.friendCount),1)])])):(0,n.Q3)("",!0)]))}};const W=(0,m.A)(G,[["__scopeId","data-v-2aab6fd0"]]);var q=W;const J={class:"profile-container"},Q={class:"profile-component"},U=["src"],V={class:"profile-info"},Y={class:"menu-dropdown"};var H=(0,n.pM)({__name:"AccountMenu",setup(a){const e=(0,r.Pj)(),t=O,o=(0,u.KR)(t),l=(0,u.KR)("Sunny Tseng"),s=(0,u.KR)("__SunnyTseng__"),i=(0,u.KR)(0),c=()=>{e.dispatch("auth/logout")},d=async()=>{try{const a=await fetch("https://api.example.com/user/profilePict");if(a.ok){const e=await a.json();e&&e.image&&(o.value=e.image)}else console.error("Failed to fetch profile image:",a.status)}catch(a){console.error("Error fetching profile image:",a)}};return(0,n.sV)((()=>{d()})),(a,e)=>((0,n.uX)(),(0,n.CE)("div",J,[(0,n.Lk)("div",Q,[(0,n.Lk)("img",{src:o.value,alt:"Profile Picture",class:"profile-image"},null,8,U),(0,n.Lk)("div",V,[(0,n.Lk)("h3",null,(0,$.v_)(l.value),1),(0,n.Lk)("p",null,(0,$.v_)(s.value),1)]),(0,n.Lk)("div",Y,[(0,n.bF)(q,{profileImage:o.value,name:l.value,friendsCount:i.value},null,8,["profileImage","name","friendsCount"]),e[0]||(e[0]=(0,n.Lk)("p",null,"Setting",-1)),(0,n.Lk)("button",{class:"logout-btn",onClick:c},"Logout "+(0,$.v_)(s.value),1)])])]))}});const z=(0,m.A)(H,[["__scopeId","data-v-62ba72e5"]]);var Z=z,aa=(0,n.pM)({name:"NavBar",components:{AccountMenu:Z,TileMatchingGame:D},setup(){const a=(0,u.KR)(!1),e=()=>{a.value=!1};return{showGameModal:a,closeModal:e}}});const ea=(0,m.A)(aa,[["render",S],["__scopeId","data-v-162bb9f8"]]);var ta=ea;function oa(a,e){return" -- NEWS BAR -- "}const na={},la=(0,m.A)(na,[["render",oa]]);var sa=la,ra=(0,n.pM)({name:"MainPage",components:{NavBar:ta,NewsBar:sa}});const ia=(0,m.A)(ra,[["render",E],["__scopeId","data-v-9ed6584c"]]);var ua=ia,ca=(0,n.pM)({name:"App",components:{LoginPage:M,MainPage:ua},setup(){const a=(0,r.Pj)(),e=(0,n.EW)((()=>a.getters["auth/isAuthenticated"]));return{isAuthenticated:e}}});const da=(0,m.A)(ca,[["render",s]]);var va=da;const fa={token:localStorage.getItem("token")||null},pa={isAuthenticated(a){return!!a.token}},ba={setToken(a,e){a.token=e,localStorage.setItem("token",e)},clearToken(a){a.token=null,localStorage.removeItem("token")}},ma={async login({commit:a},e){try{const t=await fetch("https://home.sunnytseng.com/api/relation/token/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Login failed");const o=await t.json();return a("setToken",o.access),o}catch(t){throw console.error(t),t}},logout({commit:a}){a("clearToken")}};var ga={namespaced:!0,state:fa,getters:pa,mutations:ba,actions:ma},ha=(0,r.y$)({modules:{auth:ga}});(0,o.Ef)(va).use(ha).mount("#app")}},e={};function t(o){var n=e[o];if(void 0!==n)return n.exports;var l=e[o]={exports:{}};return a[o].call(l.exports,l,l.exports,t),l.exports}t.m=a,function(){var a=[];t.O=function(e,o,n,l){if(!o){var s=1/0;for(c=0;c<a.length;c++){o=a[c][0],n=a[c][1],l=a[c][2];for(var r=!0,i=0;i<o.length;i++)(!1&l||s>=l)&&Object.keys(t.O).every((function(a){return t.O[a](o[i])}))?o.splice(i--,1):(r=!1,l<s&&(s=l));if(r){a.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}l=l||0;for(var c=a.length;c>0&&a[c-1][2]>l;c--)a[c]=a[c-1];a[c]=[o,n,l]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var o in e)t.o(e,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:e[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){t.p="/"}(),function(){var a={524:0};t.O.j=function(e){return 0===a[e]};var e=function(e,o){var n,l,s=o[0],r=o[1],i=o[2],u=0;if(s.some((function(e){return 0!==a[e]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(i)var c=i(t)}for(e&&e(o);u<s.length;u++)l=s[u],t.o(a,l)&&a[l]&&a[l][0](),a[l]=0;return t.O(c)},o=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(8025)}));o=t.O(o)})();
//# sourceMappingURL=app.0d696fac.js.map