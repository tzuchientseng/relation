(function(){"use strict";var e={8642:function(e,a,t){var o=t(5130),n=t(6768);const l={id:"app"};function s(e,a,t,o,s,r){const c=(0,n.g2)("LoginPage"),u=(0,n.g2)("MainPage");return(0,n.uX)(),(0,n.CE)("div",l,[e.isAuthenticated?((0,n.uX)(),(0,n.Wv)(u,{key:1})):((0,n.uX)(),(0,n.Wv)(c,{key:0}))])}var r=t(782),c=t.p+"img/logo.1a43b2bb.png",u=t(144);const i={class:"login-container"},f={class:"buttons"},v={class:"modal-content"},d={class:"form-group"},p={class:"form-group"};var m=(0,n.pM)({__name:"LoginCard",props:{showLogin:{type:Boolean}},setup(e){const a=(0,u.KR)(""),t=(0,u.KR)("");return(e,l)=>((0,n.uX)(),(0,n.CE)("div",i,[l[16]||(l[16]=(0,n.Lk)("h1",null,"Welcome to Relation!",-1)),l[17]||(l[17]=(0,n.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,n.Lk)("div",f,[l[6]||(l[6]=(0,n.Lk)("button",{class:"google"},"Sign in with Google",-1)),l[7]||(l[7]=(0,n.Lk)("button",{class:"apple"},"Sign in with Apple",-1)),(0,n.Lk)("button",{class:"login",onClick:l[0]||(l[0]=a=>e.$emit("toggleModal"))},"Login"),l[8]||(l[8]=(0,n.Lk)("div",{class:"divider"},"---- or ----",-1)),l[9]||(l[9]=(0,n.Lk)("p",{class:"signin"},"No account yet?",-1)),l[10]||(l[10]=(0,n.Lk)("button",{class:"create-account"},"Create Account",-1))]),e.showLogin?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal-overlay",onClick:l[5]||(l[5]=(0,o.D$)((a=>e.$emit("toggleModal")),["self"]))},[(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"close-btn",onClick:l[1]||(l[1]=a=>e.$emit("toggleModal"))},"×"),l[14]||(l[14]=(0,n.Lk)("h3",null,"Log In",-1)),(0,n.Lk)("form",{onSubmit:l[4]||(l[4]=(0,o.D$)((o=>e.$emit("login",{username:a.value,password:t.value})),["prevent"]))},[(0,n.Lk)("div",d,[l[11]||(l[11]=(0,n.Lk)("label",{for:"account"},"Account",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":l[2]||(l[2]=e=>a.value=e),placeholder:"Enter your account",required:"",autocomplete:"username"},null,512),[[o.Jo,a.value]])]),(0,n.Lk)("div",p,[l[12]||(l[12]=(0,n.Lk)("label",{for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":l[3]||(l[3]=e=>t.value=e),placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,512),[[o.Jo,t.value]])]),l[13]||(l[13]=(0,n.Lk)("button",{type:"submit",class:"submit-btn"},"Confirm",-1))],32),l[15]||(l[15]=(0,n.Lk)("p",null,[(0,n.eW)("Don't have an account? "),(0,n.Lk)("a",{href:"#"},"Sign Up")],-1))])])):(0,n.Q3)("",!0)]))}}),g=t(1241);const k=(0,g.A)(m,[["__scopeId","data-v-45390d01"]]);var h=k;const b={key:0,class:"icon"},L={key:1,class:"container"},y={class:"right-side"};var C=(0,n.pM)({__name:"LoginPage",setup(e){const a=(0,r.Pj)(),t=(0,u.KR)(!1),l=(0,u.KR)(!0),s=()=>{t.value=!t.value},i=async e=>{try{await a.dispatch("auth/login",e);s(),l.value=!1}catch(t){console.error(t),alert("Login failed. Please try again.")}};return(0,n.sV)((()=>{setTimeout((()=>{l.value=!1}),1e3)})),(e,a)=>l.value?((0,n.uX)(),(0,n.CE)("div",b,a[0]||(a[0]=[(0,n.Lk)("img",{src:c,alt:"Logo",class:"icon-img"},null,-1)]))):((0,n.uX)(),(0,n.CE)("div",L,[(0,n.bF)(o.eB,{name:"left-slide",appear:""},{default:(0,n.k6)((()=>a[1]||(a[1]=[(0,n.Lk)("div",{class:"left-side"},[(0,n.Lk)("img",{src:c,alt:"logo",id:"logo"})],-1)]))),_:1}),(0,n.bF)(o.eB,{name:"right-slide",appear:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",y,[(0,n.bF)(h,{showLogin:t.value,onToggleModal:s,onLogin:i},null,8,["showLogin"])])])),_:1})]))}});const w=(0,g.A)(C,[["__scopeId","data-v-036ddfff"]]);var _=w,M=t(4232);const E={class:"sidebar"},A={class:"game-modal"};function T(e,a,t,l,s,r){const u=(0,n.g2)("AccountMenu"),i=(0,n.g2)("TileMatchingGame");return(0,n.uX)(),(0,n.CE)("div",E,[a[4]||(a[4]=(0,n.Fv)('<img id="nav-item" src="'+c+'" alt="icon" data-v-172fbcfa><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-home" data-v-172fbcfa></i><span data-v-172fbcfa>Home</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-search" data-v-172fbcfa></i><span data-v-172fbcfa>Explore</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-bell" data-v-172fbcfa></i><span data-v-172fbcfa>Notifications</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-envelope" data-v-172fbcfa></i><span data-v-172fbcfa>Messages</span></a>',5)),(0,n.Lk)("a",{class:"menu-item",href:"#",onClick:a[0]||(a[0]=a=>e.showGameModal=!0)},a[3]||(a[3]=[(0,n.Lk)("i",{class:"fas fa-gamepad"},null,-1),(0,n.Lk)("span",null,"Game",-1)])),a[5]||(a[5]=(0,n.Fv)('<a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-bookmark" data-v-172fbcfa></i><span data-v-172fbcfa>Bookmarks</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-users" data-v-172fbcfa></i><span data-v-172fbcfa>Communities</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-star" data-v-172fbcfa></i><span data-v-172fbcfa>Premium</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-user" data-v-172fbcfa></i><span data-v-172fbcfa>Profile</span></a><a class="menu-item" href="#" data-v-172fbcfa><i class="fas fa-ellipsis-h" data-v-172fbcfa></i><span data-v-172fbcfa>More</span></a><a class="post-button" href="#" data-v-172fbcfa>Post</a>',6)),(0,n.bF)(u),e.showGameModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"game-modal-overlay",onClick:a[2]||(a[2]=(0,o.D$)(((...a)=>e.closeModal&&e.closeModal(...a)),["self"]))},[(0,n.Lk)("div",A,[(0,n.Lk)("button",{class:"close-btn",onClick:a[1]||(a[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"×"),(0,n.bF)(i)])])):(0,n.Q3)("",!0)])}const P={class:"game-container"},K={class:"game-board"},R=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function X(e,a,t,l,s,r){return(0,n.uX)(),(0,n.CE)("div",P,[a[2]||(a[2]=(0,n.Lk)("h1",null,"轉珠遊戲",-1)),(0,n.Lk)("div",K,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.board,((e,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e,((e,s)=>((0,n.uX)(),(0,n.CE)("div",{key:s,class:(0,M.C4)(["cell",`type-${e}`,{exploding:l.isExploding(t,s)}]),style:(0,M.Tr)(l.getCellStyle(t,s)),onMousedown:e=>l.startDrag(t,s,e),onMousemove:e=>l.drag(t,s,e),onMouseup:a[0]||(a[0]=(...e)=>l.endDrag&&l.endDrag(...e)),onTouchstart:e=>l.startDrag(t,s,e),onTouchmove:(0,o.D$)((e=>l.drag(t,s,e)),["prevent"]),onTouchend:a[1]||(a[1]=(...e)=>l.endDrag&&l.endDrag(...e))},null,46,R)))),128))])))),128))])])}t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(8992),t(3949),t(1454),t(7550);var I={setup(){const e=5,a=6,t=(0,u.KR)(n()),o=(0,u.KR)([]);function n(){return Array.from({length:e},(()=>Array.from({length:a},(()=>Math.floor(3*Math.random())))))}const l=(0,u.KR)(!1),s=(0,u.KR)(null),r=(0,u.KR)(null),c=(0,u.KR)([]),i=(e,a,t)=>{l.value=!0,s.value=e,r.value=a,c.value=[[e,a]]},f=(e,a,o)=>{if(!l.value)return;const n=c.value[c.value.length-1];(1===Math.abs(e-n[0])&&a===n[1]||1===Math.abs(a-n[1])&&e===n[0])&&([t.value[e][a],t.value[n[0]][n[1]]]=[t.value[n[0]][n[1]],t.value[e][a]],c.value.push([e,a]))},v=()=>{l.value=!1,p()?setTimeout((()=>{m(),setTimeout(g,300)}),300):d()},d=()=>{for(let e=c.value.length-1;e>0;e--){const[a,o]=c.value[e],[n,l]=c.value[e-1];[t.value[a][o],t.value[n][l]]=[t.value[n][l],t.value[a][o]]}},p=()=>{const n=new Set;for(let o=0;o<e;o++){let e=1;for(let l=1;l<a;l++)if(t.value[o][l]===t.value[o][l-1])e++;else{if(e>=3)for(let a=0;a<e;a++)n.add(`${o},${l-1-a}`);e=1}if(e>=3)for(let t=0;t<e;t++)n.add(`${o},${a-1-t}`)}for(let o=0;o<a;o++){let a=1;for(let l=1;l<e;l++)if(t.value[l][o]===t.value[l-1][o])a++;else{if(a>=3)for(let e=0;e<a;e++)n.add(`${l-1-e},${o}`);a=1}if(a>=3)for(let t=0;t<a;t++)n.add(`${e-1-t},${o}`)}return o.value=Array.from(n).map((e=>{const[a,t]=e.split(",").map(Number);return{row:a,col:t}})),o.value.length>0},m=()=>{o.value.forEach((({row:e,col:a})=>{t.value[e][a]=null})),o.value=[]},g=()=>{for(let o=0;o<a;o++){let a=0;for(let n=e-1;n>=0;n--)null===t.value[n][o]?a++:a>0&&(t.value[n+a][o]=t.value[n][o],t.value[n][o]=null);for(let e=0;e<a;e++)t.value[e][o]=Math.floor(3*Math.random())}p()&&setTimeout((()=>{m(),setTimeout(g,300)}),300)},k=(e,a)=>o.value.some((t=>t.row===e&&t.col===a)),h=(e,a)=>null===t.value[e][a]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:t,startDrag:i,drag:f,endDrag:v,isExploding:k,getCellStyle:h}}};const S=(0,g.A)(I,[["render",X],["__scopeId","data-v-315819a8"]]);var F=S,$=t.p+"img/male.79b1906c.png";const j={key:0,class:"overlay-div"},D={class:"overlay-content"},O=["src"];var x={__name:"AccountProfile",props:{profileImage:{type:String,required:!0},name:{type:String,required:!0},friendCount:{type:Number,required:!0}},setup(e){const a=(0,u.KR)(!1),t=()=>{a.value=!a.value};return(o,l)=>((0,n.uX)(),(0,n.CE)("div",{class:"account-profile",onClick:t},[l[0]||(l[0]=(0,n.Lk)("p",{class:"setting-style"},"Account Profile",-1)),a.value?((0,n.uX)(),(0,n.CE)("div",j,[(0,n.Lk)("div",D,[(0,n.Lk)("img",{src:e.profileImage,alt:"Profile Picture",class:"overlay-profile-image"},null,8,O),(0,n.Lk)("h4",null,(0,M.v_)(e.name),1),(0,n.Lk)("p",null,"Friend: "+(0,M.v_)(e.friendCount),1)])])):(0,n.Q3)("",!0)]))}};const G=(0,g.A)(x,[["__scopeId","data-v-73e0c16d"]]);var B=G;const N={class:"profile-container"},q=["src"],Q={class:"profile-info"};var V=(0,n.pM)({__name:"AccountMenu",setup(e){const a=(0,r.Pj)(),t=$,o=(0,u.KR)(t),l=(0,u.KR)("Sunny Tseng"),s=(0,u.KR)("__SunnyTseng__"),c=(0,u.KR)(0),i=(0,u.KR)(!1),f=()=>{i.value=!i.value},v=e=>{const a=document.querySelector(".profile-component");a&&!a.contains(e.target)&&(i.value=!1)};(0,n.sV)((()=>{document.addEventListener("click",v)}));const d=()=>{a.dispatch("auth/logout")},p=async()=>{try{const e=await fetch("https://api.example.com/user/profilePict");if(e.ok){const a=await e.json();a&&a.image&&(o.value=a.image)}else console.error("Failed to fetch profile image:",e.status)}catch(e){console.error("Error fetching profile image:",e)}};return(0,n.sV)((()=>{p()})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",N,[(0,n.Lk)("div",{class:"profile-component",onClick:f},[(0,n.Lk)("img",{src:o.value,alt:"Profile Picture",class:"profile-image"},null,8,q),(0,n.Lk)("div",Q,[(0,n.Lk)("h3",null,(0,M.v_)(l.value),1),(0,n.Lk)("p",null,(0,M.v_)(s.value),1)]),(0,n.Lk)("div",{class:(0,M.C4)(["menu-dropdown",{active:i.value}])},[(0,n.bF)(B,{profileImage:o.value,name:l.value,friendsCount:c.value},null,8,["profileImage","name","friendsCount"]),a[0]||(a[0]=(0,n.Lk)("p",null,"Setting",-1)),(0,n.Lk)("button",{class:"logout-btn",onClick:d},"Logout "+(0,M.v_)(s.value),1)],2)])]))}});const W=(0,g.A)(V,[["__scopeId","data-v-0ff31d72"]]);var J=W,U=(0,n.pM)({name:"NavBar",components:{AccountMenu:J,TileMatchingGame:F},setup(){const e=(0,u.KR)(!1),a=()=>{e.value=!1};return{showGameModal:e,closeModal:a}}});const H=(0,g.A)(U,[["render",T],["__scopeId","data-v-172fbcfa"]]);var Y=H;function z(e,a){return" -- NEWS BAR -- "}const Z={},ee=(0,g.A)(Z,[["render",z]]);var ae=ee;const te={class:"post-container"};function oe(e,a,t,o,l,s){return(0,n.uX)(),(0,n.CE)("div",te,a[0]||(a[0]=[(0,n.Lk)("div",{id:"for-you"},"For you",-1),(0,n.Lk)("div",{id:"following"},"Following",-1)]))}var ne=(0,n.pM)({name:"postBar",components:{},setup(){return{}}});const le=(0,g.A)(ne,[["render",oe],["__scopeId","data-v-6379217a"]]);var se=le;const re={id:"app"},ce={key:0,class:"logo-container"},ue={key:1,class:"animated-text"},ie={key:0,class:"container"},fe={id:"news"};var ve=(0,n.pM)({__name:"MainPage",props:{name:{}},setup(e){const a=e,t=a.name?.trim()||"Guest",l=(0,u.KR)(""),s=(0,u.KR)(!1),r=(0,u.KR)(!1),i=e=>{let a=0;l.value="";const t=setInterval((()=>{l.value+=e[a],a++,a===e.length&&clearInterval(t)}),50)};return(0,n.sV)((()=>{setTimeout((()=>{s.value=!0,i(`Hello, ${t}!`),setTimeout((()=>{r.value=!0}),1200)}),1e3)})),(e,a)=>((0,n.uX)(),(0,n.CE)("div",re,[s.value||r.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",ce,a[0]||(a[0]=[(0,n.Lk)("img",{src:c,alt:"Logo",class:"logo"},null,-1)]))),s.value&&!r.value?((0,n.uX)(),(0,n.CE)("div",ue,[(0,n.Lk)("h1",null,(0,M.v_)(l.value),1)])):(0,n.Q3)("",!0),(0,n.bF)(o.eB,{name:"fade"},{default:(0,n.k6)((()=>[r.value?((0,n.uX)(),(0,n.CE)("div",ie,[(0,n.bF)(Y),(0,n.bF)(se),(0,n.Lk)("div",fe,[(0,n.bF)(ae)])])):(0,n.Q3)("",!0)])),_:1})]))}});const de=(0,g.A)(ve,[["__scopeId","data-v-3413707c"]]);var pe=de,me=(0,n.pM)({name:"App",components:{LoginPage:_,MainPage:pe},setup(){const e=(0,r.Pj)(),a=(0,n.EW)((()=>e.getters["auth/isAuthenticated"]));return{isAuthenticated:a}}});const ge=(0,g.A)(me,[["render",s]]);var ke=ge;const he={token:localStorage.getItem("token")||null},be={isAuthenticated(e){return!!e.token}},Le={setToken(e,a){e.token=a,localStorage.setItem("token",a)},clearToken(e){e.token=null,localStorage.removeItem("token")}},ye={async login({commit:e},a){try{const t=await fetch("https://home.sunnytseng.com/api/relation/token/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error("Login failed");const o=await t.json();return e("setToken",o.access),o}catch(t){throw console.error(t),t}},logout({commit:e}){e("clearToken")}};var Ce={namespaced:!0,state:he,getters:be,mutations:Le,actions:ye},we=(0,r.y$)({modules:{auth:Ce}});(0,o.Ef)(ke).use(we).mount("#app")}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var l=a[o]={exports:{}};return e[o].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,l){if(!o){var s=1/0;for(i=0;i<e.length;i++){o=e[i][0],n=e[i][1],l=e[i][2];for(var r=!0,c=0;c<o.length;c++)(!1&l||s>=l)&&Object.keys(t.O).every((function(e){return t.O[e](o[c])}))?o.splice(c--,1):(r=!1,l<s&&(s=l));if(r){e.splice(i--,1);var u=n();void 0!==u&&(a=u)}}return a}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[o,n,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,l,s=o[0],r=o[1],c=o[2],u=0;if(s.some((function(a){return 0!==e[a]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(c)var i=c(t)}for(a&&a(o);u<s.length;u++)l=s[u],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(i)},o=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(8642)}));o=t.O(o)})();
//# sourceMappingURL=app.0d49d761.js.map