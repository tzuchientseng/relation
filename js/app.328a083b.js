(function(){"use strict";var a={5710:function(a,e,t){var o=t(5130),n=t(6768);const s={id:"app"};function l(a,e,t,o,l,r){const c=(0,n.g2)("LoginPage"),i=(0,n.g2)("MainPage");return(0,n.uX)(),(0,n.CE)("div",s,[a.isAuthenticated?((0,n.uX)(),(0,n.Wv)(i,{key:1})):((0,n.uX)(),(0,n.Wv)(c,{key:0}))])}var r=t(782),c=t.p+"img/logo.1a43b2bb.png",i=t(144);const u={class:"login-container"},d={class:"buttons"},v={class:"modal-content"},p={class:"form-group"},f={class:"form-group"};var m=(0,n.pM)({__name:"LoginCard",props:{showLogin:{type:Boolean}},setup(a){const e=(0,i.KR)(""),t=(0,i.KR)("");return(a,s)=>((0,n.uX)(),(0,n.CE)("div",u,[s[12]||(s[12]=(0,n.Lk)("h1",null,"Welcome to Relation!",-1)),s[13]||(s[13]=(0,n.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,n.Lk)("div",d,[s[6]||(s[6]=(0,n.Fv)('<button class="google" data-v-611bb4b1>Sign in with Google</button><button class="apple" data-v-611bb4b1>Sign in with Apple</button><div class="divider" data-v-611bb4b1>---- or ----</div><button class="create-account" data-v-611bb4b1>Create Account</button><p class="signin" data-v-611bb4b1>Already have an account?</p>',5)),(0,n.Lk)("button",{class:"login",onClick:s[0]||(s[0]=e=>a.$emit("toggleModal"))},"Login")]),a.showLogin?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"modal-overlay",onClick:s[5]||(s[5]=(0,o.D$)((e=>a.$emit("toggleModal")),["self"]))},[(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"close-btn",onClick:s[1]||(s[1]=e=>a.$emit("toggleModal"))},"×"),s[10]||(s[10]=(0,n.Lk)("h3",null,"Log In",-1)),(0,n.Lk)("form",{onSubmit:s[4]||(s[4]=(0,o.D$)((o=>a.$emit("login",{username:e.value,password:t.value})),["prevent"]))},[(0,n.Lk)("div",p,[s[7]||(s[7]=(0,n.Lk)("label",{for:"account"},"Account",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":s[2]||(s[2]=a=>e.value=a),placeholder:"Enter your account",required:"",autocomplete:"username"},null,512),[[o.Jo,e.value]])]),(0,n.Lk)("div",f,[s[8]||(s[8]=(0,n.Lk)("label",{for:"password"},"Password",-1)),(0,n.bo)((0,n.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":s[3]||(s[3]=a=>t.value=a),placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,512),[[o.Jo,t.value]])]),s[9]||(s[9]=(0,n.Lk)("button",{type:"submit",class:"submit-btn"},"Confirm",-1))],32),s[11]||(s[11]=(0,n.Lk)("p",null,[(0,n.eW)("Don't have an account? "),(0,n.Lk)("a",{href:"#"},"Sign Up")],-1))])])):(0,n.Q3)("",!0)]))}}),g=t(1241);const b=(0,g.A)(m,[["__scopeId","data-v-611bb4b1"]]);var h=b;const k={class:"container"},L={class:"right-side"};var y=(0,n.pM)({__name:"LoginPage",setup(a){const e=(0,r.Pj)(),t=(0,i.KR)(!1),o=()=>{t.value=!t.value},s=async a=>{try{await e.dispatch("auth/login",a);o()}catch(t){console.error(t),alert("Login failed. Please try again.")}};return(a,e)=>((0,n.uX)(),(0,n.CE)("div",k,[e[0]||(e[0]=(0,n.Lk)("div",{class:"left-side"},[(0,n.Lk)("img",{src:c,alt:"logo",id:"logo"})],-1)),(0,n.Lk)("div",L,[(0,n.bF)(h,{showLogin:t.value,onToggleModal:o,onLogin:s},null,8,["showLogin"])])]))}});const w=(0,g.A)(y,[["__scopeId","data-v-3bd1a8c0"]]);var M=w;const C={id:"app"},_={class:"container"};function E(a,e,t,o,s,l){const r=(0,n.g2)("NavBar");return(0,n.uX)(),(0,n.CE)("div",C,[(0,n.Lk)("div",_,[(0,n.bF)(r),e[0]||(e[0]=(0,n.Lk)("div",{id:"posts"},"Posts",-1)),e[1]||(e[1]=(0,n.Lk)("div",{id:"news"},"News",-1))])])}const T={class:"sidebar"},A={class:"game-modal"};function P(a,e,t,s,l,r){const i=(0,n.g2)("AccountMenu"),u=(0,n.g2)("TileMatchingGame");return(0,n.uX)(),(0,n.CE)("div",T,[e[4]||(e[4]=(0,n.Fv)('<img id="nav-item" src="'+c+'" alt="icon" data-v-0b87c076><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-home" data-v-0b87c076></i><span data-v-0b87c076>Home</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-search" data-v-0b87c076></i><span data-v-0b87c076>Explore</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-bell" data-v-0b87c076></i><span data-v-0b87c076>Notifications</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-envelope" data-v-0b87c076></i><span data-v-0b87c076>Messages</span></a>',5)),(0,n.Lk)("a",{class:"menu-item",href:"#",onClick:e[0]||(e[0]=e=>a.showGameModal=!0)},e[3]||(e[3]=[(0,n.Lk)("i",{class:"fas fa-gamepad"},null,-1),(0,n.Lk)("span",null,"Game",-1)])),e[5]||(e[5]=(0,n.Fv)('<a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-bookmark" data-v-0b87c076></i><span data-v-0b87c076>Bookmarks</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-users" data-v-0b87c076></i><span data-v-0b87c076>Communities</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-star" data-v-0b87c076></i><span data-v-0b87c076>Premium</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-user" data-v-0b87c076></i><span data-v-0b87c076>Profile</span></a><a class="menu-item" href="#" data-v-0b87c076><i class="fas fa-ellipsis-h" data-v-0b87c076></i><span data-v-0b87c076>More</span></a><a class="post-button" href="#" data-v-0b87c076>Post</a>',6)),(0,n.bF)(i),a.showGameModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"game-modal-overlay",onClick:e[2]||(e[2]=(0,o.D$)(((...e)=>a.closeModal&&a.closeModal(...e)),["self"]))},[(0,n.Lk)("div",A,[(0,n.Lk)("button",{class:"close-btn",onClick:e[1]||(e[1]=(...e)=>a.closeModal&&a.closeModal(...e))},"×"),(0,n.bF)(u)])])):(0,n.Q3)("",!0)])}var $=t(4232),K=t.p+"img/male.79b1906c.png";const S={class:"profile-container"},X=["src"],R={class:"profile-info"},j={key:0,class:"menu-dropdown"};var D=(0,n.pM)({__name:"AccountMenu",setup(a){const e=K,t=(0,i.KR)(e),s=(0,i.KR)("Sunny Tseng"),l=(0,i.KR)("__SunnyTseng__"),c=(0,i.KR)(!1),u=(0,r.Pj)(),d=()=>{u.dispatch("auth/logout")},v=async()=>{try{const a=await fetch("https://api.example.com/user/profilePict");if(a.ok){const e=await a.json();e&&e.image&&(t.value=e.image)}else console.error("Failed to fetch profile image:",a.status)}catch(a){console.error("Error fetching profile image:",a)}};(0,n.sV)((()=>{v()}));const p=()=>{c.value=!c.value},f=a=>{console.log("更多選項按鈕被點擊")};return(a,e)=>((0,n.uX)(),(0,n.CE)("div",S,[(0,n.Lk)("div",{class:"profile-component",onClick:p},[(0,n.Lk)("img",{src:t.value,alt:"Profile Picture",class:"profile-image"},null,8,X),(0,n.Lk)("div",R,[(0,n.Lk)("h3",null,(0,$.v_)(s.value),1),(0,n.Lk)("p",null,(0,$.v_)(l.value),1)]),(0,n.Lk)("button",{onClick:(0,o.D$)(f,["stop"]),class:"more-options"},"...")]),(0,n.bF)(o.eB,{name:"menu-slide"},{default:(0,n.k6)((()=>[c.value?((0,n.uX)(),(0,n.CE)("div",j,[e[0]||(e[0]=(0,n.Lk)("p",null,"Setting",-1)),(0,n.Lk)("button",{class:"logout-btn",onClick:d},"Logout "+(0,$.v_)(l.value),1)])):(0,n.Q3)("",!0)])),_:1})]))}});const O=(0,g.A)(D,[["__scopeId","data-v-2edbf7c2"]]);var F=O;const I={class:"game-container"},x={class:"game-board"},G=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function N(a,e,t,s,l,r){return(0,n.uX)(),(0,n.CE)("div",I,[e[2]||(e[2]=(0,n.Lk)("h1",null,"轉珠遊戲",-1)),(0,n.Lk)("div",x,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.board,((a,t)=>((0,n.uX)(),(0,n.CE)("div",{key:t,class:"row"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a,((a,l)=>((0,n.uX)(),(0,n.CE)("div",{key:l,class:(0,$.C4)(["cell",`type-${a}`,{exploding:s.isExploding(t,l)}]),style:(0,$.Tr)(s.getCellStyle(t,l)),onMousedown:a=>s.startDrag(t,l,a),onMousemove:a=>s.drag(t,l,a),onMouseup:e[0]||(e[0]=(...a)=>s.endDrag&&s.endDrag(...a)),onTouchstart:a=>s.startDrag(t,l,a),onTouchmove:(0,o.D$)((a=>s.drag(t,l,a)),["prevent"]),onTouchend:e[1]||(e[1]=(...a)=>s.endDrag&&s.endDrag(...a))},null,46,G)))),128))])))),128))])])}t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(8992),t(3949),t(1454),t(7550);var B={setup(){const a=5,e=6,t=(0,i.KR)(n()),o=(0,i.KR)([]);function n(){return Array.from({length:a},(()=>Array.from({length:e},(()=>Math.floor(3*Math.random())))))}const s=(0,i.KR)(!1),l=(0,i.KR)(null),r=(0,i.KR)(null),c=(0,i.KR)([]),u=(a,e,t)=>{s.value=!0,l.value=a,r.value=e,c.value=[[a,e]]},d=(a,e,o)=>{if(!s.value)return;const n=c.value[c.value.length-1];(1===Math.abs(a-n[0])&&e===n[1]||1===Math.abs(e-n[1])&&a===n[0])&&([t.value[a][e],t.value[n[0]][n[1]]]=[t.value[n[0]][n[1]],t.value[a][e]],c.value.push([a,e]))},v=()=>{s.value=!1,f()?setTimeout((()=>{m(),setTimeout(g,300)}),300):p()},p=()=>{for(let a=c.value.length-1;a>0;a--){const[e,o]=c.value[a],[n,s]=c.value[a-1];[t.value[e][o],t.value[n][s]]=[t.value[n][s],t.value[e][o]]}},f=()=>{const n=new Set;for(let o=0;o<a;o++){let a=1;for(let s=1;s<e;s++)if(t.value[o][s]===t.value[o][s-1])a++;else{if(a>=3)for(let e=0;e<a;e++)n.add(`${o},${s-1-e}`);a=1}if(a>=3)for(let t=0;t<a;t++)n.add(`${o},${e-1-t}`)}for(let o=0;o<e;o++){let e=1;for(let s=1;s<a;s++)if(t.value[s][o]===t.value[s-1][o])e++;else{if(e>=3)for(let a=0;a<e;a++)n.add(`${s-1-a},${o}`);e=1}if(e>=3)for(let t=0;t<e;t++)n.add(`${a-1-t},${o}`)}return o.value=Array.from(n).map((a=>{const[e,t]=a.split(",").map(Number);return{row:e,col:t}})),o.value.length>0},m=()=>{o.value.forEach((({row:a,col:e})=>{t.value[a][e]=null})),o.value=[]},g=()=>{for(let o=0;o<e;o++){let e=0;for(let n=a-1;n>=0;n--)null===t.value[n][o]?e++:e>0&&(t.value[n+e][o]=t.value[n][o],t.value[n][o]=null);for(let a=0;a<e;a++)t.value[a][o]=Math.floor(3*Math.random())}f()&&setTimeout((()=>{m(),setTimeout(g,300)}),300)},b=(a,e)=>o.value.some((t=>t.row===a&&t.col===e)),h=(a,e)=>null===t.value[a][e]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:t,startDrag:u,drag:d,endDrag:v,isExploding:b,getCellStyle:h}}};const W=(0,g.A)(B,[["render",N],["__scopeId","data-v-315819a8"]]);var J=W,Q=(0,n.pM)({name:"NavBar",components:{AccountMenu:F,TileMatchingGame:J},setup(){(0,r.Pj)();const a=(0,i.KR)(!1),e=()=>{a.value=!1};return{showGameModal:a,closeModal:e}}});const U=(0,g.A)(Q,[["render",P],["__scopeId","data-v-0b87c076"]]);var V=U,q=(0,n.pM)({name:"MainPage",components:{NavBar:V}});const Y=(0,g.A)(q,[["render",E],["__scopeId","data-v-f85e87ca"]]);var H=Y,z=(0,n.pM)({name:"App",components:{LoginPage:M,MainPage:H},setup(){const a=(0,r.Pj)(),e=(0,n.EW)((()=>a.getters["auth/isAuthenticated"]));return{isAuthenticated:e}}});const Z=(0,g.A)(z,[["render",l]]);var aa=Z;const ea={token:localStorage.getItem("token")||null},ta={isAuthenticated(a){return!!a.token}},oa={setToken(a,e){a.token=e,localStorage.setItem("token",e)},clearToken(a){a.token=null,localStorage.removeItem("token")}},na={async login({commit:a},e){try{const t=await fetch("https://home.sunnytseng.com/api/relation/token/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Login failed");const o=await t.json();return a("setToken",o.access),o}catch(t){throw console.error(t),t}},logout({commit:a}){a("clearToken")}};var sa={namespaced:!0,state:ea,getters:ta,mutations:oa,actions:na},la=(0,r.y$)({modules:{auth:sa}});(0,o.Ef)(aa).use(la).mount("#app")}},e={};function t(o){var n=e[o];if(void 0!==n)return n.exports;var s=e[o]={exports:{}};return a[o].call(s.exports,s,s.exports,t),s.exports}t.m=a,function(){var a=[];t.O=function(e,o,n,s){if(!o){var l=1/0;for(u=0;u<a.length;u++){o=a[u][0],n=a[u][1],s=a[u][2];for(var r=!0,c=0;c<o.length;c++)(!1&s||l>=s)&&Object.keys(t.O).every((function(a){return t.O[a](o[c])}))?o.splice(c--,1):(r=!1,s<l&&(l=s));if(r){a.splice(u--,1);var i=n();void 0!==i&&(e=i)}}return e}s=s||0;for(var u=a.length;u>0&&a[u-1][2]>s;u--)a[u]=a[u-1];a[u]=[o,n,s]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var o in e)t.o(e,o)&&!t.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:e[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){t.p="/"}(),function(){var a={524:0};t.O.j=function(e){return 0===a[e]};var e=function(e,o){var n,s,l=o[0],r=o[1],c=o[2],i=0;if(l.some((function(e){return 0!==a[e]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(c)var u=c(t)}for(e&&e(o);i<l.length;i++)s=l[i],t.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return t.O(u)},o=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(5710)}));o=t.O(o)})();
//# sourceMappingURL=app.328a083b.js.map