(function(){"use strict";var e={9949:function(e,a,t){var n=t(5130),o=t(6768);const l={id:"app"};function s(e,a,t,n,s,r){const i=(0,o.g2)("LoginPage"),u=(0,o.g2)("MainPage");return(0,o.uX)(),(0,o.CE)("div",l,[e.isAuthenticated?((0,o.uX)(),(0,o.Wv)(u,{key:1})):((0,o.uX)(),(0,o.Wv)(i,{key:0}))])}var r=t(782),i=t.p+"img/logo.1a43b2bb.png",u=t(144);const c={class:"login-container"},d={class:"buttons"},v={class:"modal-content"},f={class:"form-group"},p={class:"form-group"};var m=(0,o.pM)({__name:"LoginCard",props:{showLogin:{type:Boolean}},setup(e){const a=(0,u.KR)(""),t=(0,u.KR)("");return(e,l)=>((0,o.uX)(),(0,o.CE)("div",c,[l[12]||(l[12]=(0,o.Lk)("h1",null,"Welcome to Relation!",-1)),l[13]||(l[13]=(0,o.Lk)("h2",null,"Connect, Share, and Grow Together",-1)),(0,o.Lk)("div",d,[l[6]||(l[6]=(0,o.Fv)('<button class="google" data-v-611bb4b1>Sign in with Google</button><button class="apple" data-v-611bb4b1>Sign in with Apple</button><div class="divider" data-v-611bb4b1>---- or ----</div><button class="create-account" data-v-611bb4b1>Create Account</button><p class="signin" data-v-611bb4b1>Already have an account?</p>',5)),(0,o.Lk)("button",{class:"login",onClick:l[0]||(l[0]=a=>e.$emit("toggleModal"))},"Login")]),e.showLogin?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:l[5]||(l[5]=(0,n.D$)((a=>e.$emit("toggleModal")),["self"]))},[(0,o.Lk)("div",v,[(0,o.Lk)("button",{class:"close-btn",onClick:l[1]||(l[1]=a=>e.$emit("toggleModal"))},"×"),l[10]||(l[10]=(0,o.Lk)("h3",null,"Log In",-1)),(0,o.Lk)("form",{onSubmit:l[4]||(l[4]=(0,n.D$)((n=>e.$emit("login",{username:a.value,password:t.value})),["prevent"]))},[(0,o.Lk)("div",f,[l[7]||(l[7]=(0,o.Lk)("label",{for:"account"},"Account",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"account","onUpdate:modelValue":l[2]||(l[2]=e=>a.value=e),placeholder:"Enter your account",required:"",autocomplete:"username"},null,512),[[n.Jo,a.value]])]),(0,o.Lk)("div",p,[l[8]||(l[8]=(0,o.Lk)("label",{for:"password"},"Password",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":l[3]||(l[3]=e=>t.value=e),placeholder:"Enter your password",required:"",autocomplete:"current-password"},null,512),[[n.Jo,t.value]])]),l[9]||(l[9]=(0,o.Lk)("button",{type:"submit",class:"submit-btn"},"Confirm",-1))],32),l[11]||(l[11]=(0,o.Lk)("p",null,[(0,o.eW)("Don't have an account? "),(0,o.Lk)("a",{href:"#"},"Sign Up")],-1))])])):(0,o.Q3)("",!0)]))}}),b=t(1241);const g=(0,b.A)(m,[["__scopeId","data-v-611bb4b1"]]);var h=g;const k={class:"container"},L={class:"right-side"};var y=(0,o.pM)({__name:"LoginPage",setup(e){const a=(0,r.Pj)(),t=(0,u.KR)(!1),n=()=>{t.value=!t.value},l=async e=>{try{await a.dispatch("auth/login",e);n()}catch(t){console.error(t),alert("Login failed. Please try again.")}};return(e,a)=>((0,o.uX)(),(0,o.CE)("div",k,[a[0]||(a[0]=(0,o.Lk)("div",{class:"left-side"},[(0,o.Lk)("img",{src:i,alt:"logo",id:"logo"})],-1)),(0,o.Lk)("div",L,[(0,o.bF)(h,{showLogin:t.value,onToggleModal:n,onLogin:l},null,8,["showLogin"])])]))}});const w=(0,b.A)(y,[["__scopeId","data-v-3bd1a8c0"]]);var C=w;const M={id:"app"},_={class:"container"},E={id:"news"};function A(e,a,t,n,l,s){const r=(0,o.g2)("NavBar"),i=(0,o.g2)("NewsBar");return(0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("div",_,[(0,o.bF)(r),a[0]||(a[0]=(0,o.Lk)("div",{id:"posts"},"Posts",-1)),(0,o.Lk)("div",E,[(0,o.bF)(i)])])])}const P={class:"sidebar"},T={class:"game-modal"};function S(e,a,t,l,s,r){const u=(0,o.g2)("AccountMenu"),c=(0,o.g2)("TileMatchingGame");return(0,o.uX)(),(0,o.CE)("div",P,[a[4]||(a[4]=(0,o.Fv)('<img id="nav-item" src="'+i+'" alt="icon" data-v-162bb9f8><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-home" data-v-162bb9f8></i><span data-v-162bb9f8>Home</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-search" data-v-162bb9f8></i><span data-v-162bb9f8>Explore</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-bell" data-v-162bb9f8></i><span data-v-162bb9f8>Notifications</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-envelope" data-v-162bb9f8></i><span data-v-162bb9f8>Messages</span></a>',5)),(0,o.Lk)("a",{class:"menu-item",href:"#",onClick:a[0]||(a[0]=a=>e.showGameModal=!0)},a[3]||(a[3]=[(0,o.Lk)("i",{class:"fas fa-gamepad"},null,-1),(0,o.Lk)("span",null,"Game",-1)])),a[5]||(a[5]=(0,o.Fv)('<a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-bookmark" data-v-162bb9f8></i><span data-v-162bb9f8>Bookmarks</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-users" data-v-162bb9f8></i><span data-v-162bb9f8>Communities</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-star" data-v-162bb9f8></i><span data-v-162bb9f8>Premium</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-user" data-v-162bb9f8></i><span data-v-162bb9f8>Profile</span></a><a class="menu-item" href="#" data-v-162bb9f8><i class="fas fa-ellipsis-h" data-v-162bb9f8></i><span data-v-162bb9f8>More</span></a><a class="post-button" href="#" data-v-162bb9f8>Post</a>',6)),(0,o.bF)(u),e.showGameModal?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"game-modal-overlay",onClick:a[2]||(a[2]=(0,n.D$)(((...a)=>e.closeModal&&e.closeModal(...a)),["self"]))},[(0,o.Lk)("div",T,[(0,o.Lk)("button",{class:"close-btn",onClick:a[1]||(a[1]=(...a)=>e.closeModal&&e.closeModal(...a))},"×"),(0,o.bF)(c)])])):(0,o.Q3)("",!0)])}var $=t(4232);const K={class:"game-container"},R={class:"game-board"},I=["onMousedown","onMousemove","onTouchstart","onTouchmove"];function X(e,a,t,l,s,r){return(0,o.uX)(),(0,o.CE)("div",K,[a[2]||(a[2]=(0,o.Lk)("h1",null,"轉珠遊戲",-1)),(0,o.Lk)("div",R,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.board,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:"row"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:(0,$.C4)(["cell",`type-${e}`,{exploding:l.isExploding(t,s)}]),style:(0,$.Tr)(l.getCellStyle(t,s)),onMousedown:e=>l.startDrag(t,s,e),onMousemove:e=>l.drag(t,s,e),onMouseup:a[0]||(a[0]=(...e)=>l.endDrag&&l.endDrag(...e)),onTouchstart:e=>l.startDrag(t,s,e),onTouchmove:(0,n.D$)((e=>l.drag(t,s,e)),["prevent"]),onTouchend:a[1]||(a[1]=(...e)=>l.endDrag&&l.endDrag(...e))},null,46,I)))),128))])))),128))])])}t(4114),t(7642),t(8004),t(3853),t(5876),t(2475),t(5024),t(1698),t(8992),t(3949),t(1454),t(7550);var D={setup(){const e=5,a=6,t=(0,u.KR)(o()),n=(0,u.KR)([]);function o(){return Array.from({length:e},(()=>Array.from({length:a},(()=>Math.floor(3*Math.random())))))}const l=(0,u.KR)(!1),s=(0,u.KR)(null),r=(0,u.KR)(null),i=(0,u.KR)([]),c=(e,a,t)=>{l.value=!0,s.value=e,r.value=a,i.value=[[e,a]]},d=(e,a,n)=>{if(!l.value)return;const o=i.value[i.value.length-1];(1===Math.abs(e-o[0])&&a===o[1]||1===Math.abs(a-o[1])&&e===o[0])&&([t.value[e][a],t.value[o[0]][o[1]]]=[t.value[o[0]][o[1]],t.value[e][a]],i.value.push([e,a]))},v=()=>{l.value=!1,p()?setTimeout((()=>{m(),setTimeout(b,300)}),300):f()},f=()=>{for(let e=i.value.length-1;e>0;e--){const[a,n]=i.value[e],[o,l]=i.value[e-1];[t.value[a][n],t.value[o][l]]=[t.value[o][l],t.value[a][n]]}},p=()=>{const o=new Set;for(let n=0;n<e;n++){let e=1;for(let l=1;l<a;l++)if(t.value[n][l]===t.value[n][l-1])e++;else{if(e>=3)for(let a=0;a<e;a++)o.add(`${n},${l-1-a}`);e=1}if(e>=3)for(let t=0;t<e;t++)o.add(`${n},${a-1-t}`)}for(let n=0;n<a;n++){let a=1;for(let l=1;l<e;l++)if(t.value[l][n]===t.value[l-1][n])a++;else{if(a>=3)for(let e=0;e<a;e++)o.add(`${l-1-e},${n}`);a=1}if(a>=3)for(let t=0;t<a;t++)o.add(`${e-1-t},${n}`)}return n.value=Array.from(o).map((e=>{const[a,t]=e.split(",").map(Number);return{row:a,col:t}})),n.value.length>0},m=()=>{n.value.forEach((({row:e,col:a})=>{t.value[e][a]=null})),n.value=[]},b=()=>{for(let n=0;n<a;n++){let a=0;for(let o=e-1;o>=0;o--)null===t.value[o][n]?a++:a>0&&(t.value[o+a][n]=t.value[o][n],t.value[o][n]=null);for(let e=0;e<a;e++)t.value[e][n]=Math.floor(3*Math.random())}p()&&setTimeout((()=>{m(),setTimeout(b,300)}),300)},g=(e,a)=>n.value.some((t=>t.row===e&&t.col===a)),h=(e,a)=>null===t.value[e][a]?{transform:"translateY(100%)",opacity:0}:{transform:"translateY(0)",opacity:1};return{board:t,startDrag:c,drag:d,endDrag:v,isExploding:g,getCellStyle:h}}};const F=(0,b.A)(D,[["render",X],["__scopeId","data-v-315819a8"]]);var j=F,O=t.p+"img/male.79b1906c.png";const x={key:0,class:"overlay-div"},N={class:"overlay-content"},G=["src"];var B={__name:"AccountProfile",props:{profileImage:{type:String,required:!0},name:{type:String,required:!0},friendCount:{type:Number,required:!0}},setup(e){const a=(0,u.KR)(!1),t=()=>{a.value=!a.value};return(n,l)=>((0,o.uX)(),(0,o.CE)("div",{class:"account-profile",onClick:t},[l[0]||(l[0]=(0,o.Lk)("p",{class:"setting-style"},"Account Profile",-1)),a.value?((0,o.uX)(),(0,o.CE)("div",x,[(0,o.Lk)("div",N,[(0,o.Lk)("img",{src:e.profileImage,alt:"Profile Picture",class:"overlay-profile-image"},null,8,G),(0,o.Lk)("h4",null,(0,$.v_)(e.name),1),(0,o.Lk)("p",null,"Friend: "+(0,$.v_)(e.friendCount),1)])])):(0,o.Q3)("",!0)]))}};const W=(0,b.A)(B,[["__scopeId","data-v-73e0c16d"]]);var q=W;const V={class:"profile-container"},J=["src"],Q={class:"profile-info"};var U=(0,o.pM)({__name:"AccountMenu",setup(e){const a=(0,r.Pj)(),t=O,l=(0,u.KR)(t),s=(0,u.KR)("Sunny Tseng"),i=(0,u.KR)("__SunnyTseng__"),c=(0,u.KR)(0),d=(0,u.KR)(!1),v=()=>{d.value=!d.value},f=()=>{a.dispatch("auth/logout")},p=()=>{d.value=!1},m=e=>{const a=e.target;a.closest(".profile-component")||p()};(0,o.sV)((()=>{document.addEventListener("click",m)})),(0,o.hi)((()=>{document.removeEventListener("click",m)}));const b=async()=>{try{const e=await fetch("https://api.example.com/user/profilePict");if(e.ok){const a=await e.json();a&&a.image&&(l.value=a.image)}else console.error("Failed to fetch profile image:",e.status)}catch(e){console.error("Error fetching profile image:",e)}};return(0,o.sV)((()=>{b()})),(e,a)=>((0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("div",{class:"profile-component",onClick:v},[(0,o.Lk)("img",{src:l.value,alt:"Profile Picture",class:"profile-image"},null,8,J),(0,o.Lk)("div",Q,[(0,o.Lk)("h3",null,(0,$.v_)(s.value),1),(0,o.Lk)("p",null,(0,$.v_)(i.value),1)]),(0,o.bo)((0,o.Lk)("div",{class:"menu-dropdown",onClick:a[0]||(a[0]=(0,n.D$)((()=>{}),["stop"]))},[(0,o.bF)(q,{profileImage:l.value,name:s.value,friendsCount:c.value},null,8,["profileImage","name","friendsCount"]),a[1]||(a[1]=(0,o.Lk)("p",null,"Setting",-1)),(0,o.Lk)("button",{class:"logout-btn",onClick:f}," Logout "+(0,$.v_)(i.value),1)],512),[[n.aG,d.value]])])]))}});const Y=(0,b.A)(U,[["__scopeId","data-v-c5a882c4"]]);var H=Y,z=(0,o.pM)({name:"NavBar",components:{AccountMenu:H,TileMatchingGame:j},setup(){const e=(0,u.KR)(!1),a=()=>{e.value=!1};return{showGameModal:e,closeModal:a}}});const Z=(0,b.A)(z,[["render",S],["__scopeId","data-v-162bb9f8"]]);var ee=Z;function ae(e,a){return" -- NEWS BAR -- "}const te={},ne=(0,b.A)(te,[["render",ae]]);var oe=ne,le=(0,o.pM)({name:"MainPage",components:{NavBar:ee,NewsBar:oe}});const se=(0,b.A)(le,[["render",A],["__scopeId","data-v-9ed6584c"]]);var re=se,ie=(0,o.pM)({name:"App",components:{LoginPage:C,MainPage:re},setup(){const e=(0,r.Pj)(),a=(0,o.EW)((()=>e.getters["auth/isAuthenticated"]));return{isAuthenticated:a}}});const ue=(0,b.A)(ie,[["render",s]]);var ce=ue;const de={token:localStorage.getItem("token")||null},ve={isAuthenticated(e){return!!e.token}},fe={setToken(e,a){e.token=a,localStorage.setItem("token",a)},clearToken(e){e.token=null,localStorage.removeItem("token")}},pe={async login({commit:e},a){try{const t=await fetch("https://home.sunnytseng.com/api/relation/token/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)});if(!t.ok)throw new Error("Login failed");const n=await t.json();return e("setToken",n.access),n}catch(t){throw console.error(t),t}},logout({commit:e}){e("clearToken")}};var me={namespaced:!0,state:de,getters:ve,mutations:fe,actions:pe},be=(0,r.y$)({modules:{auth:me}});(0,n.Ef)(ce).use(be).mount("#app")}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var l=a[n]={exports:{}};return e[n].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,l){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],l=e[c][2];for(var r=!0,i=0;i<n.length;i++)(!1&l||s>=l)&&Object.keys(t.O).every((function(e){return t.O[e](n[i])}))?n.splice(i--,1):(r=!1,l<s&&(s=l));if(r){e.splice(c--,1);var u=o();void 0!==u&&(a=u)}}return a}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,o,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,l,s=n[0],r=n[1],i=n[2],u=0;if(s.some((function(a){return 0!==e[a]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(i)var c=i(t)}for(a&&a(n);u<s.length;u++)l=s[u],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(c)},n=self["webpackChunkrelation_frontend"]=self["webpackChunkrelation_frontend"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(9949)}));n=t.O(n)})();
//# sourceMappingURL=app.1210b280.js.map